# JSON を CSV に変換する

指定された列を持つオブジェクトの配列をカンマ区切り値 (CSV) の文字列に変換するには、次の関数を使用します。

```js
const JSONtoCSV = (arr, columns, delimiter = ",") =>
  [
    columns.join(delimiter),
    ...arr.map((obj) =>
      columns.reduce(
        (acc, key) =>
          `${acc}${!acc.length ? "" : delimiter}"${!obj[key] ? "" : obj[key]}"`,
        ""
      )
    )
  ].join("\n");
```

これを使用するには、次の手順に従います。

1. ターミナル/SSH を開き、コーディングを練習するために `node` と入力します。
2. `JSONtoCSV` 関数に次の引数を渡します。
   - `arr`: 変換するオブジェクトの配列。
   - `columns`: CSV 出力に含める列を指定する文字列の配列。
   - `delimiter`: 使用する区切り文字を指定するオプショナルな文字列 (既定値は `','`)。
3. 関数は、指定された列とオブジェクトの値のみを含む CSV 文字列を返します。
4. 区切り文字が指定されていない場合、既定の区切り文字 `','` が使用されます。
5. 関数の使用方法の例は、以下のコード ブロックに示してあります。

```js
JSONtoCSV(
  [{ a: 1, b: 2 }, { a: 3, b: 4, c: 5 }, { a: 6 }, { b: 7 }],
  ["a", "b"]
); // 'a,b\n"1","2"\n"3","4"\n"6",""\n"","7"'

JSONtoCSV(
  [{ a: 1, b: 2 }, { a: 3, b: 4, c: 5 }, { a: 6 }, { b: 7 }],
  ["a", "b"],
  ";"
); // 'a;b\n"1";"2"\n"3";"4"\n"6";""\n"";"7"'
```
