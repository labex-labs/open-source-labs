# Как разбить элементы массива на группы на основе функции

Если вам нужно разбить элементы в массиве, полученном с помощью `zip`, и применить функцию, вы можете использовать `unzipWith`. Вот, как это можно реализовать:

1. Используйте `Math.max()` и оператор расширения (`...`), чтобы получить самую длинную подмассив в массиве, и `Array.prototype.map()`, чтобы каждый элемент стал массивом.
2. Используйте `Array.prototype.reduce()` и `Array.prototype.forEach()`, чтобы сопоставить сгруппированные значения отдельным массивам.
3. Используйте `Array.prototype.map()` и оператор расширения (`...`), чтобы применить `fn` к каждой отдельной группе элементов.

```js
const unzipWith = (arr, fn) =>
  arr
    .reduce(
      (acc, val) => (val.forEach((v, i) => acc[i].push(v)), acc),
      Array.from({
        length: Math.max(...arr.map((x) => x.length))
      }).map((x) => [])
    )
    .map((val) => fn(...val));
```

Для использования `unzipWith` откройте Терминал/SSH и введите `node`. Затем вы можете запустить следующий пример:

```js
unzipWith(
  [
    [1, 10, 100],
    [2, 20, 200]
  ],
  (...args) => args.reduce((acc, v) => acc + v, 0)
);
// [3, 30, 300]
```

Это создаст массив элементов, разбив элементов в входном массиве, полученном с помощью `zip`, и применяя заданную функцию.
