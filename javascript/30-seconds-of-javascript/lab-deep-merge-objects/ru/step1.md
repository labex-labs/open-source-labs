# Как глубоко объединить объекты в JavaScript

Чтобы глубоко объединить два объекта в JavaScript, можно использовать функцию `deepMerge`. Эта функция принимает два объекта и функцию в качестве аргументов. Функция используется для обработки ключей, присутствующих в обоих объектах.

Вот, как работает функция `deepMerge`:

1. Используйте `Object.keys()` для получения ключей обоих объектов, создайте из них `Set` и используйте оператор расширения (`...`), чтобы создать массив всех уникальных ключей.
2. Используйте `Array.prototype.reduce()`, чтобы добавить каждый уникальный ключ в объект, используя `fn` для объединения значений двух заданных объектов.

Вот код для функции `deepMerge`:

```js
const deepMerge = (a, b, fn) =>
  [...new Set([...Object.keys(a), ...Object.keys(b)])].reduce(
    (acc, key) => ({ ...acc, [key]: fn(key, a[key], b[key]) }),
    {}
  );
```

Для использования функции `deepMerge` вызовите ее с двумя объектами и функцией. Вот пример:

```js
deepMerge(
  { a: true, b: { c: [1, 2, 3] } },
  { a: false, b: { d: [1, 2, 3] } },
  (key, a, b) => (key === "a" ? a && b : Object.assign({}, a, b))
);
// { a: false, b: { c: [ 1, 2, 3 ], d: [ 1, 2, 3 ] } }
```

В этом примере функция `deepMerge` используется для объединения двух объектов. Результирующий объект имеет значения обоих объектов, объединенных вместе.
