# Разработка сервера

Проверим, работает ли ваш проект Django. Перейдите в внешнюю директорию `mysite`, если вы этого еще не сделали, и выполните следующие команды:

```bash
cd ~/project/mysite
python manage.py runserver
```

На командной строке вы увидите следующий вывод:

```plaintext
Performing system checks...

System check identified no issues (0 silenced).

You have unapplied migrations; your app may not work properly until they are applied. Run 'python manage.py migrate' to apply them.

- 15:50:53 Django version, using settings'mysite.settings' Starting development server at <http://127.0.0.1:8000/> Quit the server with CONTROL-C.
```

На данный момент игнорируем предупреждение о непримененных миграциях базы данных; мы скоро займемся базой данных.

Вы запустили сервер разработки Django, легковесный веб-сервер, написанный полностью на Python. Мы включили его в состав Django, чтобы вы могли быстро разрабатывать приложения, не нужно конфигурировать сервер для производства (например, Apache), пока не будете готовы к выпуску продукта.

Теперь стоит отметить: **не** используйте этот сервер в чем-то похожем на продакшен-окружение. Он предназначен только для разработки. (Мы занимаемся созданием веб-фреймворков, а не веб-серверов.)

Теперь, когда сервер запущен, перейдите по адресу <http://127.0.0.1:8000/> в вашем веб-браузере. Или выполните `curl 127.0.0.1:8000` в терминале. Вы увидите страницу "Поздравляем!", на которой ракета взлетает. Все работает!

В LabEx VM необходимо добавить домен LabEx в `ALLOWED_HOSTS`. Откройте `mysite/settings.py` и добавьте `*` в конец `ALLOWED_HOSTS`, чтобы он выглядел так:

```python
ALLOWED_HOSTS = ["*"]
```

Это говорит Django, что ему разрешается обслуживать запросы с любым заголовком хоста.

![Django development server running](../assets/20230907-08-56-33-3uvbOwp3.png)

## Изменение порта

По умолчанию команда `runserver` запускает сервер разработки на внутреннем IP-адресе по порту 8000.

Если вы хотите изменить порт сервера, передайте его в качестве аргумента командной строки. Например, эта команда запускает сервер на порту 8080:

```bash
python manage.py runserver 8080
```

Если вы хотите изменить IP-адрес сервера, передайте его вместе с портом. Например, чтобы слушать все доступные публичные IP-адреса (что полезно, если вы используете Vagrant или хотите показать свой проект другим компьютерам в сети), используйте:

```bash
python manage.py runserver 0.0.0.0:8080
```

Теперь переключитесь на вкладку **Web 8080** в LabEx VM и вы увидите ту же страницу "Поздравляем".

![Django development server page](../assets/20230907-08-58-22-M3Luydxk.png)

Полную документацию по серверу разработки можно найти в справочнике по `runserver`.

> Автоматическое перезагрузка `runserver`
> Сервер разработки автоматически перезагружает Python-код по мере необходимости для каждого запроса. Вам не нужно перезапускать сервер, чтобы изменения в коде вступили в силу. Однако некоторые действия, такие как добавление файлов, не вызывают перезагрузку, поэтому в таких случаях вам придется перезапустить сервер.
