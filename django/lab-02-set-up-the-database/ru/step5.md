# Введение в административный интерфейс Django

Генерация административных сайтов для вашего персонала или клиентов для добавления, изменения и удаления контента - это утомительная работа, которая не требует большей креативности. Поэтому Django полностью автоматизирует создание административных интерфейсов для моделей.

Django был написан в редакционной среде, с четким разделением между "публикацией контента" и "публичным" сайтом. Менеджеры сайта используют систему для добавления новостей, мероприятий, спортивных результатов и т.д., и этот контент отображается на публичном сайте. Django решает проблему создания единого интерфейса для администраторов сайта для редактирования контента.

Административный интерфейс не предназначен для использования посетителями сайта. Это для менеджеров сайта.

## Создание администратора

Сначала нам нужно создать пользователя, который сможет войти в административный сайт. Запустите следующую команду:

```bash
python manage.py createsuperuser
```

Введите желаемое имя пользователя и нажмите Enter.

```plaintext
Username: admin
```

Затем вас попросят ввести желаемый адрес электронной почты:

```plaintext
Email address: admin@example.com
```

Последний шаг - ввести ваш пароль. Вас попросят ввести пароль дважды, второе время для подтверждения первого.

```plaintext
Password: 12345678
Password (again): 12345678

This password is too common.
This password is entirely numeric.
Bypass password validation and create user anyway? [y/N]: y
Superuser created successfully.
```

## Запуск сервера разработки

Административный сайт Django активирован по умолчанию. Запустим сервер разработки и изучим его.

Если сервер не запущен, запустите его так:

```bash
python manage.py runserver
```

Теперь откройте веб-браузер в вкладке **VNC** и перейдите по адресу "/admin/" на вашем локальном домене - например, `http://127.0.0.1:8000/admin/`. Вы должны увидеть экран входа в административный интерфейс:

![Экран входа в административный интерфейс Django](../assets/20230907-14-31-50-SvkJF8K8.png)

Поскольку `перевод </topics/i18n/translation>` включен по умолчанию, если вы установите `LANGUAGE_CODE`, экран входа будет отображаться на заданном языке (если Django имеет соответствующие переводы).

## Вход в административный сайт

Теперь попробуйте войти с помощью учетной записи суперпользователя, которую вы создали на предыдущем шаге. Вы должны увидеть главную страницу административного интерфейса Django:

![Главная страница административного интерфейса Django](../assets/admin02.png)

Вы должны увидеть несколько типов редактируемого контента: группы и пользователей. Они предоставляются `django.contrib.auth`, фреймворком аутентификации, поставляемым вместе с Django.

## Делаем приложение для опросов редактируемым в административном интерфейсе

Но где наше приложение для опросов? Его не отображается на главной странице административного интерфейса.

Еще одно действие нужно совершить: мы должны сообщить административному интерфейсу, что объекты `Question` имеют административный интерфейс. Для этого откройте файл `polls/admin.py` и отредактируйте его так, чтобы он выглядел следующим образом:

```python
from django.contrib import admin

from.models import Question

admin.site.register(Question)
```

## Изучаем бесплатные возможности административного интерфейса

Теперь, когда мы зарегистрировали `Question`, Django знает, что его нужно отобразить на главной странице административного интерфейса:

![Главная страница административного интерфейса Django с отображением опросов](../assets/admin03t.png)

Нажмите "Вопросы". Теперь вы на странице "списка изменений" для вопросов. Эта страница отображает все вопросы в базе данных и позволяет выбрать один для изменения. Там есть вопрос "Что нового?", который мы создали ранее:

![Страница списка изменений для опросов](../assets/admin04t.png)

Нажмите на вопрос "Что нового?", чтобы отредактировать его:

![Редактирование вопроса для опроса](../assets/20230907-14-33-49-XWeEgAXl.png)

Обратите внимание на следующее:

- Форма автоматически генерируется из модели `Question`.
- Различные типы полей модели (`~django.db.models.DateTimeField`, `~django.db.models.CharField`) соответствуют соответствующим виджетам ввода HTML. Каждый тип поля знает, как отобразить себя в административном интерфейсе Django.
- Каждый `~django.db.models.DateTimeField` получает бесплатные JavaScript-шорткаты. Для дат есть ярлык "Сегодня" и календарь-выпадающий, а для времени - ярлык "Теперь" и удобный выпадающий список, в котором перечислены часто вводимые времена.

В нижней части страницы вам предоставляется несколько вариантов:

- Сохранить - Сохраняет изменения и возвращается на страницу списка изменений для этого типа объектов.
- Сохранить и продолжить редактирование - Сохраняет изменения и перезагружает административную страницу для этого объекта.
- Сохранить и добавить еще один - Сохраняет изменения и загружает новую, пустую форму для этого типа объектов.
- Удалить - Отображает страницу подтверждения удаления.

Если значение "Дата публикации" не соответствует времени, когда вы создали вопрос в разделе **Создание базового приложения для опросов**, это, вероятно, означает, что вы забыли установить правильное значение для настройки `TIME_ZONE`. Измените ее, перезагрузите страницу и проверьте, появляется ли правильное значение.

Измените "Дата публикации", нажав на ярлыки "Сегодня" и "Теперь". Затем нажмите "Сохранить и продолжить редактирование". Затем нажмите "История" в верхнем правом углу. Вы увидите страницу, на которой перечислены все изменения, сделанные с помощью административного интерфейса Django для этого объекта, с меткой времени и именем пользователя, который внес изменения:

![Страница истории для объекта вопроса](../assets/admin06t.png)

Когда вы будете знакомы с API моделей и ознакомитесь с административным сайтом, прочитайте раздел **Создание представлений для публичного интерфейса**, чтобы узнать, как добавить больше представлений в наше приложение для опросов.
