# 编写有用的文档注释

准确地为你的包编写文档将帮助其他用户了解如何以及何时使用它们，所以值得花时间来编写文档。在第 3 章中，我们讨论了如何使用两个斜杠 `//` 来注释 Rust 代码。Rust 还有一种专门用于文档的注释，方便地称为 **文档注释**，它会生成 HTML 文档。该 HTML 会显示面向那些想要知道如何 **使用** 你的 crate 而不是你的 crate 是如何 **实现** 的程序员的公共 API 项的文档注释内容。

文档注释使用三个斜杠 `///` 而不是两个，并支持使用 Markdown 标记来格式化文本。将文档注释放在它们所注释的项之前。清单 14-1 展示了一个名为 `my_crate` 的 crate 中 `add_one` 函数的文档注释。

文件名：`src/lib.rs`

````rust
/// 将给定的数字加一。
///
/// # 示例
///
/// ```
/// let arg = 5;
/// let answer = my_crate::add_one(arg);
///
/// assert_eq!(6, answer);
/// ```
pub fn add_one(x: i32) -> i32 {
    x + 1
}
````

清单 14-1：一个函数的文档注释

在这里，我们描述了 `add_one` 函数的功能，以 `示例` 为标题开始一个部分，然后提供演示如何使用 `add_one` 函数的代码。我们可以通过运行 `cargo doc` 从这个文档注释生成 HTML 文档。这个命令会运行 Rust 附带的 `rustdoc` 工具，并将生成的 HTML 文档放在 `target/doc` 目录中。

为了方便起见，运行 `cargo doc --open` 将为你当前 crate 的文档（以及你的 crate 的所有依赖项的文档）生成 HTML，并在网页浏览器中打开结果。导航到 `add_one` 函数，你将看到文档注释中的文本是如何呈现的，如图 14-1 所示。

图 14-1：`add_one` 函数的 HTML 文档
