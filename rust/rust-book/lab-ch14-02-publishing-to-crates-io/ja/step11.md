# cargo yank を使って Crates.io からバージョンを非推奨にする

クレートの以前のバージョンを削除することはできませんが、将来のプロジェクトがそれらを新しい依存関係として追加するのを防ぐことができます。これは、クレートのバージョンが何らかの理由で破損している場合に便利です。そのような状況では、Cargo はクレートのバージョンを引っ張ることをサポートしています。

バージョンを _引っ張る_ と、新しいプロジェクトがそのバージョンに依存することを防ぎますが、それに依存している既存のすべてのプロジェクトが継続することを許可します。基本的に、引っ張ることは、_Cargo.lock_ を持つすべてのプロジェクトが壊れないことを意味し、生成される将来の _Cargo.lock_ ファイルは引っ張られたバージョンを使用しなくなります。

クレートのバージョンを引っ張るには、以前に公開したクレートのディレクトリで `cargo yank` を実行し、引っ張りたいバージョンを指定します。たとえば、`guessing_game` という名前のクレートのバージョン 1.0.1 を公開し、それを引っ張りたい場合、`guessing_game` のプロジェクトディレクトリで次のコマンドを実行します。

```bash
$ cargo yank --vers 1.0.1
Updating crates.io index
Yank guessing_game@1.0.1
```

コマンドに `--undo` を追加することで、引っ張りを元に戻して、プロジェクトが再びバージョンに依存できるようにすることもできます。

```bash
$ cargo yank --vers 1.0.1 --undo
Updating crates.io index
Unyank guessing_game@1.0.1
```

引っ張ることは、コードを削除しません。たとえば、誤ってアップロードされたシークレットを削除することはできません。そのようなことが起こった場合、それらのシークレットを直ちにリセットする必要があります。
