# 바이너리 프로젝트의 관심사 분리

여러 작업을 `main` 함수에 할당하는 조직 문제는 많은 바이너리 프로젝트에서 흔히 발생합니다. 결과적으로 Rust 커뮤니티는 `main`이 커지기 시작할 때 바이너리 프로그램의 개별 관심사를 분할하기 위한 지침을 개발했습니다. 이 프로세스는 다음과 같은 단계를 거칩니다.

- 프로그램을 `main.rs` 파일과 `lib.rs` 파일로 분할하고 프로그램의 로직을 `lib.rs`로 이동합니다.
- 명령줄 구문 분석 로직이 작으면 `main.rs`에 유지될 수 있습니다.
- 명령줄 구문 분석 로직이 복잡해지기 시작하면 `main.rs`에서 추출하여 `lib.rs`로 이동합니다.

이 프로세스 후 `main` 함수에 남아 있는 책임은 다음과 같이 제한되어야 합니다.

- 인수 값으로 명령줄 구문 분석 로직 호출
- 다른 구성 설정
- `lib.rs`에서 `run` 함수 호출
- `run`이 오류를 반환하는 경우 오류 처리

이 패턴은 관심사 분리에 관한 것입니다: `main.rs`는 프로그램 실행을 처리하고 `lib.rs`는 현재 작업의 모든 로직을 처리합니다. `main` 함수를 직접 테스트할 수 없기 때문에 이 구조를 사용하면 모든 프로그램의 로직을 `lib.rs`의 함수로 이동하여 테스트할 수 있습니다. `main.rs`에 남아 있는 코드는 읽어서 정확성을 확인할 수 있을 정도로 작을 것입니다. 이 프로세스를 따라 프로그램을 다시 작업해 보겠습니다.
