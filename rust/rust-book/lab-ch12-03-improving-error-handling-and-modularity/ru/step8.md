# Returning a Result Instead of Calling panic!

Вместо этого мы можем вернуть значение `Result`, которое будет содержать экземпляр `Config` в случае успеха и описывать проблему в случае ошибки. Мы также собираемся изменить имя функции с `new` на `build`, потому что многие программисты ожидают, что функции `new` никогда не будут завершаться с ошибкой. Когда `Config::build` сообщает `main`, мы можем использовать тип `Result`, чтобы сигнализировать, что возникла проблема. Затем мы можем изменить `main`, чтобы преобразовать вариант `Err` в более практическую ошибку для наших пользователей, без окружающего текста о `thread'main'` и `RUST_BACKTRACE`, который вызывает вызов `panic!`.

Listing 12-9 показывает изменения, которые нам нужно внести в возвращаемое значение функции, которую мы теперь называем `Config::build`, и тело функции, необходимое для возврата `Result`. Обратите внимание, что это не скомпилируется, пока мы не обновим `main`, что мы сделаем в следующем списке.

Filename: `src/main.rs`

```rust
impl Config {
    fn build(args: &[String]) -> Result<Config, &'static str> {
        if args.len() < 3 {
            return Err("not enough arguments");
        }

        let query = args[1].clone();
        let file_path = args[2].clone();

        Ok(Config { query, file_path })
    }
}
```

Listing 12-9: Returning a `Result` from `Config::build`

Наша функция `build` возвращает `Result` с экземпляром `Config` в случае успеха и `&'static str` в случае ошибки. Наши значения ошибок всегда будут строковыми литералами с временем жизни `'static`.

Мы внесли два изменения в тело функции: вместо вызова `panic!` когда пользователь не передает достаточно аргументов, мы теперь возвращаем значение `Err`, и мы обернули возвращаемое значение `Config` в `Ok`. Эти изменения делают функцию соответствующей ее новому сигнатуре типа.

Возвращение значения `Err` из `Config::build` позволяет функции `main` обрабатывать значение `Result`, возвращаемое функцией `build`, и более аккуратно завершать процесс в случае ошибки.
