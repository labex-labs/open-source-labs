# Separation of Concerns for Binary Projects

Проблема организации распределения ответственности за несколько задач между функцией `main` распространена для многих бинарных проектов. Вследствие этого сообщество Rust разработало рекомендации по разделению различных аспектов бинарной программы, когда функция `main` становится достаточно большой. Этот процесс включает следующие шаги:

- Разделите вашу программу на файл `main.rs` и файл `lib.rs` и перенесите логику вашей программы в `lib.rs`.
- Пока логика разбора аргументов командной строки невелика, ее можно оставить в `main.rs`.
- Когда логика разбора аргументов командной строки начинает усложняться, извлеките ее из `main.rs` и перенесите в `lib.rs`.

Обязанности, которые остаются в функции `main` после этого процесса, должны быть ограничены следующим:

- Вызов логики разбора аргументов командной строки с значениями аргументов
- Настройка любой другой конфигурации
- Вызов функции `run` в `lib.rs`
- Обработка ошибки, если `run` возвращает ошибку

Эта схема заключается в разделении аспектов: `main.rs` отвечает за запуск программы, а `lib.rs` - за всю логику текущей задачи. Поскольку вы не можете напрямую протестировать функцию `main`, эта структура позволяет вам протестировать всю логику вашей программы, передав ее в функции в `lib.rs`. Код, оставшийся в `main.rs`, будет достаточно малым, чтобы проверить его правильность, прочитав его. Переработайте нашу программу, следуя этому процессу.
