# Improving the Error Message

В Listing 12-8 мы добавляем проверку в функцию `new`, которая будет проверять, достаточно ли длинный срез перед доступом к индексам 1 и 2. Если срез не достаточно длинный, программа завершается с ошибкой и выводит более информативное сообщение об ошибке.

Filename: `src/main.rs`

```rust
--snip--
fn new(args: &[String]) -> Config {
    if args.len() < 3 {
        panic!("not enough arguments");
    }
    --snip--
```

Listing 12-8: Adding a check for the number of arguments

Этот код похож на функцию `Guess::new`, которую мы написали в Listing 9-13, где мы вызывали `panic!`, когда аргумент `value` выходил за диапазон допустимых значений. Здесь вместо проверки диапазона значений мы проверяем, что длина `args` составляет по крайней мере `3`, и остальная часть функции может работать при условии, что это условие выполнено. Если в `args` меньше трех элементов, это условие будет истинным, и мы вызываем макрос `panic!`, чтобы немедленно завершить программу.

С этими дополнительными строками кода в `new` давайте снова запустим программу без аргументов, чтобы посмотреть, как теперь выглядит ошибка:

```bash
$ cargo run
   Compiling minigrep v0.1.0 (file:///projects/minigrep)
    Finished dev [unoptimized + debuginfo] target(s) in 0.0s
     Running `target/debug/minigrep`
thread 'main' panicked at 'not enough arguments',
src/main.rs:26:13
note: run with `RUST_BACKTRACE=1` environment variable to display
a backtrace
```

Этот вывод лучше: теперь у нас есть разумное сообщение об ошибке. Однако, у нас также есть лишняя информация, которую мы не хотим давать нашим пользователям. Возможно, техника, которую мы использовали в Listing 9-13, здесь не является наилучшей: вызов `panic!` более подходит для проблемы программирования, чем для проблемы использования, как обсуждалось в главе 9. Вместо этого мы будем использовать другую технику, которую вы узнали в главе 9 — возвращать `Result`, указывающее на успех или ошибку.
