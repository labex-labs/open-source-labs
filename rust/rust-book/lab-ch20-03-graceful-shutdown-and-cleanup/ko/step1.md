# Graceful Shutdown and Cleanup

Listing 20-20 의 코드는 의도한 대로 스레드 풀을 사용하여 비동기적으로 요청에 응답합니다. `workers`, `id`, 그리고 `thread` 필드를 직접적으로 사용하지 않아, 아무것도 정리하지 않고 있다는 것을 상기시키는 몇 가지 경고가 나타납니다. 덜 우아한 ctrl-C 방식을 사용하여 메인 스레드를 중단하면, 다른 모든 스레드도 요청을 처리하는 중이더라도 즉시 중단됩니다.

다음으로, `Drop` 트레이트를 구현하여 풀의 각 스레드에서 `join`을 호출하여 종료 전에 작업을 완료할 수 있도록 할 것입니다. 그런 다음, 스레드에게 새로운 요청을 더 이상 받지 않고 종료해야 함을 알리는 방법을 구현할 것입니다. 이 코드가 작동하는 것을 보기 위해, 서버가 스레드 풀을 graceful shutdown 하기 전에 두 개의 요청만 받도록 수정할 것입니다.
