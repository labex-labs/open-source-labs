# 구조체 디스트럭처링 (Destructuring Structs)

Listing 18-12 는 `x`와 `y` 두 개의 필드를 가진 `Point` 구조체를 보여주며, `let` 문을 사용하여 패턴으로 분해할 수 있습니다.

파일 이름: `src/main.rs`

```rust
struct Point {
    x: i32,
    y: i32,
}

fn main() {
    let p = Point { x: 0, y: 7 };

    let Point { x: a, y: b } = p;
    assert_eq!(0, a);
    assert_eq!(7, b);
}
```

Listing 18-12: 구조체의 필드를 별도의 변수로 디스트럭처링

이 코드는 `p` 구조체의 `x` 및 `y` 필드의 값과 일치하는 변수 `a`와 `b`를 생성합니다. 이 예제는 패턴의 변수 이름이 구조체의 필드 이름과 일치할 필요가 없음을 보여줍니다. 그러나 변수 이름을 필드 이름과 일치시켜 어떤 변수가 어떤 필드에서 왔는지 기억하기 쉽게 만드는 것이 일반적입니다. 이러한 일반적인 사용법 때문에, 그리고 `let Point { x: x, y: y } = p;`를 작성하는 것은 중복이 많기 때문에, Rust 는 구조체 필드와 일치하는 패턴에 대한 단축 구문을 가지고 있습니다. 구조체 필드의 이름만 나열하면 패턴에서 생성된 변수는 동일한 이름을 갖게 됩니다. Listing 18-13 은 Listing 18-12 의 코드와 동일하게 동작하지만, `let` 패턴에서 생성된 변수는 `a`와 `b` 대신 `x`와 `y`입니다.

파일 이름: `src/main.rs`

```rust
struct Point {
    x: i32,
    y: i32,
}

fn main() {
    let p = Point { x: 0, y: 7 };

    let Point { x, y } = p;
    assert_eq!(0, x);
    assert_eq!(7, y);
}
```

Listing 18-13: 구조체 필드 단축 구문을 사용하여 구조체 필드 디스트럭처링

이 코드는 `p` 변수의 `x` 및 `y` 필드와 일치하는 변수 `x`와 `y`를 생성합니다. 결과적으로 변수 `x`와 `y`는 `p` 구조체의 값을 포함합니다.

또한 모든 필드에 대한 변수를 생성하는 대신 구조체 패턴의 일부로 리터럴 값으로 디스트럭처링할 수 있습니다. 이렇게 하면 다른 필드를 디스트럭처링하기 위해 변수를 생성하면서 특정 값에 대해 일부 필드를 테스트할 수 있습니다.

Listing 18-14 에서 `Point` 값을 세 가지 경우로 분리하는 `match` 표현식이 있습니다: `x` 축에 직접 놓인 점 (이는 `y = 0`일 때 참), `y` 축 (`x = 0`) 에 놓인 점, 또는 어느 축에도 없는 점.

파일 이름: `src/main.rs`

```rust
fn main() {
    let p = Point { x: 0, y: 7 };

    match p {
        Point { x, y: 0 } => println!("On the x axis at {x}"),
        Point { x: 0, y } => println!("On the y axis at {y}"),
        Point { x, y } => {
            println!("On neither axis: ({x}, {y})");
        }
    }
}
```

Listing 18-14: 하나의 패턴에서 리터럴 값 디스트럭처링 및 매칭

첫 번째 arm 은 `y` 필드가 리터럴 `0`과 일치하는 경우 `y` 필드가 일치하도록 지정하여 `x` 축에 놓인 모든 점과 일치합니다. 패턴은 여전히 이 arm 에 대한 코드에서 사용할 수 있는 `x` 변수를 생성합니다.

마찬가지로, 두 번째 arm 은 `x` 필드가 `0`이고 `y` 필드의 값에 대한 변수 `y`를 생성하여 `y` 축에 있는 모든 점과 일치합니다. 세 번째 arm 은 리터럴을 지정하지 않으므로 다른 모든 `Point`와 일치하고 `x` 및 `y` 필드 모두에 대한 변수를 생성합니다.

이 예에서 값 `p`는 `x`가 `0`을 포함하기 때문에 두 번째 arm 과 일치하므로 이 코드는 `On the y axis at 7`을 출력합니다.

`match` 표현식은 첫 번째 일치하는 패턴을 찾으면 arm 확인을 중지하므로, `Point { x: 0, y: 0}`이 `x` 축과 `y` 축에 있더라도 이 코드는 `On the x axis at 0`만 출력합니다.
