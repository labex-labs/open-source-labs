# Запуск тестов параллельно или последовательно

Когда вы запускаете несколько тестов, по умолчанию они запускаются параллельно с использованием потоков, что означает, что они завершают выполнение быстрее и вы получаете обратную связь быстрее. Поскольку тесты запускаются одновременно, вы должны убедиться, что ваши тесты не зависят друг от друга или от какого-либо общего состояния, включая общий окружающий контекст, такой как текущая рабочая директория или переменные окружения.

Например, предположим, что каждый из ваших тестов выполняет некоторый код, который создает файл на диске с именем _test-output.txt_ и записывает в него некоторые данные. Затем каждый тест читает данные из этого файла и утверждает, что файл содержит определенное значение, которое различается в каждом тесте. Поскольку тесты запускаются одновременно, один тест может перезаписать файл в промежутке между записью и чтением файла другим тестом. Второй тест тогда будет завершаться с ошибкой, не потому, что код неверен, а потому, что тесты вмешиваются друг с другом при параллельном выполнении. Одним из решений является обеспечение того, чтобы каждый тест записывал в отдельный файл; другое решение — запускать тесты по одному.

Если вы не хотите запускать тесты параллельно или если вы хотите более детального контроля над количеством используемых потоков, вы можете передать флаг `--test-threads` и количество потоков, которое вы хотите использовать, в бинарник теста. Посмотрите на следующий пример:

```bash
cargo test -- --test-threads=1
```

Мы установили количество тестовых потоков равным `1`, тем самым сообщаем программе не использовать никакой параллелизм. Запуск тестов с использованием одного потока займет больше времени, чем параллельный запуск, но тесты не будут мешать друг другу, если они используют общие ресурсы.
