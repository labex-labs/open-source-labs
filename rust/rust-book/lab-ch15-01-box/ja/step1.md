# Box`<T>`{=html} を使ってヒープ上のデータを指す方法

最も単純なスマートポインタは「ボックス」で、その型は `Box<T>` と書きます。ボックスを使うと、ヒープ上にデータを格納できます。スタックに残るのは、ヒープ上のデータへのポインタです。スタックとヒープの違いについては、第4章を参照してください。

ボックスは、データをスタックではなくヒープ上に格納する以外に、パフォーマンスのオーバーヘッドはありません。ただし、追加の機能もあまりありません。最も頻繁に使うケースは以下のとおりです。

- コンパイル時に型のサイズがわからない場合で、正確なサイズが必要なコンテキストでその型の値を使いたい場合
- 大量のデータがあり、所有権を転送したいが、その際にデータがコピーされないようにしたい場合
- 特定の型ではなく、特定のトレイトを実装する型であることだけが重要で、その型の値を所有したい場合

最初のケースについては、「ボックスを使った再帰型の有効化」で説明します。2番目のケースでは、大量のデータの所有権を転送するときに、データがスタック上でコピーされるために時間がかかる場合があります。このような場合にパフォーマンスを向上させるために、大量のデータをボックスに入れてヒープ上に格納することができます。そうすると、スタック上を移動するのは小さなポインタデータだけで、参照されるデータはヒープ上の同じ場所にとどまります。3番目のケースは「トレイトオブジェクト」と呼ばれ、「異なる型の値を許容するトレイトオブジェクトの使用」でそのトピックについて説明します。ここで学んだことは、そのセクションでも再利用されます！
