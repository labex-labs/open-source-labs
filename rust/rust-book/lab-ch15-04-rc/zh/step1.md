# Rc`<T>`，引用计数智能指针

在大多数情况下，所有权是明确的：你确切地知道哪个变量拥有给定的值。然而，在某些情况下，一个值可能有多个所有者。例如，在图数据结构中，多条边可能指向同一个节点，并且从概念上讲，该节点由所有指向它的边所拥有。除非没有任何边指向该节点，即没有所有者，否则该节点不应被清理。

你必须通过使用 Rust 类型 `Rc<T>` 来显式地启用多重所有权，`Rc<T>` 是 _引用计数_（reference counting）的缩写。`Rc<T>` 类型会跟踪对一个值的引用数量，以确定该值是否仍在使用。如果对一个值没有引用，那么该值可以被清理，而不会使任何引用变得无效。

把 `Rc<T>` 想象成家庭娱乐室里的一台电视。当一个人进入房间看电视时，他们会打开电视。其他人可以进入房间并观看电视。当最后一个人离开房间时，他们会关掉电视，因为电视不再被使用了。如果有人在其他人还在看电视的时候关掉电视，剩下的电视观众会抗议的！

当我们想要在堆上为程序的多个部分分配一些数据以供读取，并且在编译时无法确定哪个部分将最后使用该数据时，我们就使用 `Rc<T>` 类型。如果我们知道哪个部分将最后完成使用，我们可以让该部分成为数据的所有者，并且编译时执行的正常所有权规则将会生效。

请注意，`Rc<T>` 仅用于单线程场景。当我们在第 16 章讨论并发时，我们将介绍如何在多线程程序中进行引用计数。
