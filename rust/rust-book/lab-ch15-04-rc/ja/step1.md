# Rc`<T>`{=html}、参照カウントスマートポインタ

ほとんどの場合、所有権は明確です。つまり、特定の値を所有している変数が誰であるかを正確に知っています。ただし、単一の値に複数の所有者がいる場合もあります。たとえば、グラフデータ構造では、複数のエッジが同じノードを指すことがあり、そのノードは概念的にそれを指すすべてのエッジによって所有されます。ノードに指すエッジがなく、所有者がいない場合に限り、ノードをクリーンアップする必要があります。

Rust の型`Rc<T>`を使用して明示的に複数の所有権を有効にする必要があります。これは、「参照カウント」の略です。`Rc<T>`型は、値がまだ使用されているかどうかを判断するために、値への参照数を追跡します。値への参照がゼロの場合、値はクリーンアップされ、参照が無効になることはありません。

`Rc<T>`を、リビングルームのテレビと想像してみてください。1 人がテレビを見るために部屋に入ると、テレビをオンにします。他の人が部屋に入ってテレビを見ることができます。最後の人が部屋を出ると、テレビをオフにします。なぜなら、もはや使用されていないからです。他の人がまだテレビを見ている間に誰かがテレビをオフにすると、残りのテレビ視聴者から大騒ぎが起こります！

プログラムの複数の部分でヒープ上にデータを割り当てて読み取りたい場合、コンパイル時にどの部分が最後にデータの使用を終えるかを判断できない場合、`Rc<T>`型を使用します。最後に終了する部分がわかっていた場合、その部分をデータの所有者にすればよく、コンパイル時に強制される通常の所有権ルールが機能します。

ただし、`Rc<T>`は単一スレッドのシナリオでのみ使用できます。16 章で並列性について説明する際に、マルチスレッドプログラムで参照カウントを行う方法について説明します。
