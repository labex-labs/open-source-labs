# Rc`<T>`{=html}, умный указатель с подсчетом ссылок

В большинстве случаев владение ясно определено: вы точно знаете, какое переменная владеет определенным значением. Однако бывают ситуации, когда одно значение может иметь несколько владельцев. Например, в структурах данных графов несколько ребер могут ссылаться на одну и ту же вершину, и эта вершина концептуально принадлежит всем ребрам, которые на нее ссылаются. Вершина не должна быть удалена, пока не останется ни одного ребра, которое на нее ссылается, то есть пока она не потеряет всех владельцев.

Чтобы явно разрешить несколько владельцев, нужно использовать тип Rust `Rc<T>`, сокращение от _reference counting_ (подсчета ссылок). Тип `Rc<T>` отслеживает количество ссылок на значение, чтобы определить, используется ли оно по-прежнему. Если с значением нет ссылок, то его можно удалить, не опасаясь, что ссылки станут недействительными.

Представьте себе `Rc<T>` в роли телевизора в гостиной. Когда один человек входит, чтобы посмотреть телевизор, он включает его. Другие могут войти в комнату и смотреть телевизор. Когда последний человек выходит из комнаты, он выключает телевизор, потому что он больше не используется. Если кто-то выключит телевизор, пока другие его еще смотрят, остальные зрители будут возмущены!

Мы используем тип `Rc<T>`, когда хотим выделить некоторые данные в куче для чтения несколькими частями нашего кода, и не можем определить на этапе компиляции, какая часть последним закончит использовать эти данные. Если бы мы знали, какая часть закончит последней, мы могли бы сделать ее владельцем данных, и обычные правила владения, действующие на этапе компиляции, вступили бы в силу.

Обратите внимание, что `Rc<T>` предназначен только для однопоточных сценариев. Когда мы будем обсуждать параллелизм в главе 16, мы рассмотрим, как реализовать подсчет ссылок в многопоточных программах.
