# 不健全なトレイトの実装

`unsafe`を使って、不健全なトレイトを実装することができます。トレイトが不健全であるのは、そのメソッドの少なくとも 1 つがコンパイラが検証できない不変条件を持っている場合です。トレイトが`unsafe`であることを宣言するには、`trait`の前に`unsafe`キーワードを追加し、トレイトの実装も`unsafe`としてマークします。これは、リスト 19-11 に示すようになります。

```rust
unsafe trait Foo {
    // メソッドはここに記述します
}

unsafe impl Foo for i32 {
    // メソッドの実装はここに記述します
}
```

リスト 19-11：不健全なトレイトの定義と実装

`unsafe impl`を使うことで、コンパイラが検証できない不変条件を守ることを約束します。

例として、「Send と Sync トレイトによる拡張可能な並列処理」で議論した`Send`と`Sync`マーカートレイトを思い出してください。もし私たちの型が完全に`Send`型と`Sync`型で構成されている場合、コンパイラは自動的にこれらのトレイトを実装します。もし私たちが、生のポインタのように`Send`でも`Sync`でもない型を含む型を実装し、その型を`Send`または`Sync`としてマークしたい場合、`unsafe`を使わなければなりません。Rust は、私たちの型がスレッド間で安全に送信できる、または複数のスレッドからアクセスできるという保証を守っていることを検証できません。したがって、私たちはそれらのチェックを手動で行い、`unsafe`でそれを示す必要があります。
