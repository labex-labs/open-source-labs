# パニックするかしないか

では、いつ`panic!`を呼び出すべきか、いつ`Result`を返すべきかをどのように判断すればよいでしょうか。コードがパニックすると、回復する方法はありません。回復の可能性があるかどうかに関係なく、どんなエラー状況でも`panic!`を呼び出すことができますが、その場合、呼び出し元のコードにとって状況が回復不可能であるという判断を行ってしまいます。`Result`値を返すことを選ぶと、呼び出し元のコードにオプションを与えることができます。呼び出し元のコードは、その状況に適した方法で回復を試みることができるかもしれませんし、この場合の`Err`値が回復不可能であると判断して、`panic!`を呼び出して、回復可能なエラーを回復不可能なエラーに変えることもできます。したがって、失敗する可能性のある関数を定義する際には、`Result`を返すことが良い既定の選択肢です。

例、プロトタイプコード、テストなどの状況では、`Result`を返す代わりにパニックするコードを書いた方が適切です。なぜそうなるのかを見てみましょう。その後、コンパイラが失敗が不可能であることを判断できないが、人間としては判断できる状況についても議論します。この章は、ライブラリコードでパニックするかどうかを決定するための一般的なガイドラインで締めくくります。
