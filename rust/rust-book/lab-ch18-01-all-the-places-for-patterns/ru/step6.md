# let - выражения

До этой главы мы только явно обсуждали использование шаблонов с `match` и `if let`, но на самом деле мы использовали шаблоны и в других местах, в том числе и в `let` - выражениях. Например, рассмотрим простое присвоение переменной с использованием `let`:

```rust
let x = 5;
```

Каждый раз, когда вы использовали `let` - выражение подобное этому, вы использовали шаблоны, хотя, возможно, и не замечали этого! Более формально, `let` - выражение выглядит так:

```rust
let PATTERN = EXPRESSION;
```

В выражениях типа `let x = 5;`, где в слоте PATTERN стоит имя переменной, имя переменной представляет собой особо простую форму шаблона. Rust сравнивает выражение с шаблоном и назначает любые имена, которые находит. Таким образом, в примере `let x = 5;` `x` - это шаблон, который означает "привяжите то, что здесь совпадает, к переменной `x`". Поскольку имя `x` представляет весь шаблон, этот шаблон по существу означает "привяжите все к переменной `x`, независимо от значения".

Чтобы более четко увидеть аспекты сопоставления шаблонов в `let`, рассмотрим Листинг 18 - 4, в котором используется шаблон с `let` для деструктурирования кортежа.

```rust
let (x, y, z) = (1, 2, 3);
```

Листинг 18 - 4: Использование шаблона для деструктурирования кортежа и создания трех переменных сразу

Здесь мы сопоставляем кортеж с шаблоном. Rust сравнивает значение `(1, 2, 3)` с шаблоном `(x, y, z)` и видит, что значение соответствует шаблону, то есть количество элементов в обоих совпадает, поэтому Rust связывает `1` с `x`, `2` с `y` и `3` с `z`. Можно представить этот шаблон кортежа, как вложение трех отдельных шаблонов переменных внутри него.

Если количество элементов в шаблоне не совпадает с количеством элементов в кортеже, тип в целом не совпадет и мы получим ошибку компиляции. Например, Листинг 18 - 5 показывает попытку деструктурирования кортежа с тремя элементами на две переменные, что не сработает.

```rust
let (x, y) = (1, 2, 3);
```

Листинг 18 - 5: Некорректное создание шаблона, в котором переменные не соответствуют количеству элементов в кортеже

Попытка скомпилировать этот код приводит к следующей ошибке типа:

```bash
error[E0308]: mismatched types
 --> src/main.rs:2:9
  |
2 |     let (x, y) = (1, 2, 3);
  |         ^^^^^^   --------- this expression has type `({integer}, {integer},
{integer})`
  |         |
  |         expected a tuple with 3 elements, found one with 2 elements
  |
  = note: expected tuple `({integer}, {integer}, {integer})`
             found tuple `(_, _)`
```

Чтобы исправить ошибку, мы можем игнорировать один или несколько значений в кортеже с использованием `_` или `..`, как вы увидите в разделе "Игнорирование значений в шаблоне". Если проблема заключается в том, что в шаблоне слишком много переменных, решение - это сделать типы совместимыми, удалив переменные, чтобы количество переменных было равно количеству элементов в кортеже.
