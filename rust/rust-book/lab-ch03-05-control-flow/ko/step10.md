# `for`를 사용하여 컬렉션 반복

배열과 같은 컬렉션의 요소를 반복하기 위해 `while` 구문을 사용할 수 있습니다. 예를 들어, 목록 3-4 의 루프는 배열 `a`의 각 요소를 출력합니다.

파일 이름: `src/main.rs`

```rust
fn main() {
    let a = [10, 20, 30, 40, 50];
    let mut index = 0;

    while index < 5 {
        println!("the value is: {}", a[index]);

        index += 1;
    }
}
```

목록 3-4: `while` 루프를 사용하여 컬렉션의 각 요소 반복

여기서 코드는 배열의 요소를 통해 카운트합니다. 인덱스 `0`에서 시작하여 배열의 마지막 인덱스에 도달할 때까지 루프합니다 (즉, `index < 5`가 더 이상 `true`가 아닐 때). 이 코드를 실행하면 배열의 모든 요소가 출력됩니다.

```bash
$ cargo run
   Compiling loops v0.1.0 (file:///projects/loops)
    Finished dev [unoptimized + debuginfo] target(s) in 0.32s
     Running `target/debug/loops`
the value is: 10
the value is: 20
the value is: 30
the value is: 40
the value is: 50
```

예상대로 다섯 개의 모든 배열 값이 터미널에 나타납니다. `index`가 어느 시점에서 `5`의 값에 도달하더라도 루프는 배열에서 여섯 번째 값을 가져오려고 시도하기 전에 실행을 중지합니다.

그러나 이 접근 방식은 오류가 발생하기 쉽습니다. 인덱스 값 또는 테스트 조건이 잘못된 경우 프로그램이 패닉을 일으킬 수 있습니다. 예를 들어, `a` 배열의 정의를 네 개의 요소를 갖도록 변경했지만 조건을 `while index < 4`로 업데이트하는 것을 잊어버린 경우 코드는 패닉을 일으킬 것입니다. 또한 컴파일러가 루프를 통해 반복할 때마다 인덱스가 배열의 경계 내에 있는지 여부에 대한 조건부 검사를 수행하기 위해 런타임 코드를 추가하므로 속도가 느립니다.

더 간결한 대안으로 `for` 루프를 사용하여 컬렉션의 각 항목에 대해 일부 코드를 실행할 수 있습니다. `for` 루프는 목록 3-5 의 코드와 같습니다.

파일 이름: `src/main.rs`

```rust
fn main() {
    let a = [10, 20, 30, 40, 50];

    for element in a {
        println!("the value is: {element}");
    }
}
```

목록 3-5: `for` 루프를 사용하여 컬렉션의 각 요소 반복

이 코드를 실행하면 목록 3-4 와 동일한 출력을 볼 수 있습니다. 더 중요한 것은 이제 코드의 안전성을 높이고 배열의 끝을 벗어나거나 충분히 멀리 가지 않아 일부 항목을 놓치는 것으로 인해 발생할 수 있는 버그의 가능성을 제거했다는 것입니다.

`for` 루프를 사용하면 목록 3-4 에서 사용된 방법과 같이 배열의 값 수를 변경하더라도 다른 코드를 변경하는 것을 기억할 필요가 없습니다.

`for` 루프의 안전성과 간결함은 Rust 에서 가장 일반적으로 사용되는 루프 구성 요소로 만듭니다. 목록 3-3 에서 `while` 루프를 사용한 카운트다운 예제와 같이 특정 횟수만큼 일부 코드를 실행하려는 경우에도 대부분의 Rustaceans 는 `for` 루프를 사용합니다. 이를 수행하는 방법은 표준 라이브러리에서 제공하는 `Range`를 사용하는 것입니다. `Range`는 한 숫자에서 시작하여 다른 숫자 전에 끝나는 일련의 모든 숫자를 생성합니다.

다음은 `for` 루프와 아직 이야기하지 않은 다른 메서드인 `rev`를 사용하여 범위를 반전시킨 카운트다운의 모습입니다.

파일 이름: `src/main.rs`

```rust
fn main() {
    for number in (1..4).rev() {
        println!("{number}!");
    }
    println!("LIFTOFF!!!");
}
```

이 코드가 좀 더 좋지 않나요?
