# トレイトオブジェクトは動的ディスパッチを行う

「ジェネリックを使用したコードのパフォーマンス」では、ジェネリックにトレイト境界を使用する場合、コンパイラが行うモノモーフィック化プロセスについて説明しました。コンパイラは、ジェネリック型パラメータの代わりに使用する各具体的な型に対して、関数とメソッドの非ジェネリックな実装を生成します。モノモーフィック化の結果として生成されるコードは、_静的ディスパッチ_ を行っています。これは、コンパイル時にどのメソッドを呼び出しているかをコンパイラが知っている場合です。これは、コンパイル時にどのメソッドを呼び出しているかをコンパイラが判断できない _動的ディスパッチ_ とは対照的です。動的ディスパッチの場合、コンパイラは実行時にどのメソッドを呼び出すかを判断するコードを生成します。

トレイトオブジェクトを使用する場合、Rustは動的ディスパッチを使用しなければなりません。コンパイラは、トレイトオブジェクトを使用するコードで使用されるすべての型を知っていないため、どの型で実装されたどのメソッドを呼び出すかを知りません。代わりに、実行時には、Rustはトレイトオブジェクト内のポインタを使用して、どのメソッドを呼び出すかを知ります。この検索には、静的ディスパッチでは発生しない実行時のコストがかかります。動的ディスパッチはまた、コンパイラがメソッドのコードをインライン展開する選択を妨げ、それによりいくつかの最適化を妨げます。ただし、リスト17-5で書いたコードには追加の柔軟性があり、リスト17-9でサポートできましたので、検討すべきトレードオフです。
