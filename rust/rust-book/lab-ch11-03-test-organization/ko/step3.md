# 테스트 모듈 (Tests Module) 과 #\[cfg(test)\]

`tests` 모듈의 `#[cfg(test)]` 어노테이션은 `cargo build`를 실행할 때가 아니라 `cargo test`를 실행할 때만 테스트 코드를 컴파일하고 실행하도록 Rust 에 지시합니다. 이렇게 하면 라이브러리만 빌드하려는 경우 컴파일 시간을 절약하고, 테스트가 포함되지 않으므로 결과 컴파일된 아티팩트의 공간을 절약할 수 있습니다. 통합 테스트는 다른 디렉토리에 있기 때문에 `#[cfg(test)]` 어노테이션이 필요하지 않다는 것을 알 수 있습니다. 그러나 유닛 테스트는 코드와 동일한 파일에 있기 때문에 `#[cfg(test)]`를 사용하여 컴파일된 결과에 포함되지 않도록 지정합니다.

이 장의 첫 번째 섹션에서 새로운 `adder` 프로젝트를 생성했을 때 Cargo 가 우리를 위해 이 코드를 생성했음을 기억하십시오.

파일 이름: `src/lib.rs`

```rust
#[cfg(test)]
mod tests {
    #[test]
    fn it_works() {
        let result = 2 + 2;
        assert_eq!(result, 4);
    }
}
```

이 코드는 자동으로 생성된 `tests` 모듈입니다. `cfg` 속성은 *구성 (configuration)*을 의미하며, 특정 구성 옵션이 주어질 때만 다음 항목을 포함하도록 Rust 에 지시합니다. 이 경우 구성 옵션은 `test`이며, 이는 테스트를 컴파일하고 실행하기 위해 Rust 에서 제공됩니다. `cfg` 속성을 사용하면 `cargo test`로 테스트를 활발하게 실행하는 경우에만 Cargo 가 테스트 코드를 컴파일합니다. 여기에는 `#[test]`로 주석 처리된 함수 외에도 이 모듈 내에 있을 수 있는 모든 도우미 함수가 포함됩니다.
