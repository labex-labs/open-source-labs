# 属性のようなマクロ

属性のようなマクロは、カスタム `derive` マクロに似ていますが、`derive` 属性用のコードを生成する代わりに、新しい属性を作成できるようにします。また、もっと柔軟です。`derive` は構造体と列挙体にのみ機能しますが、属性は関数など、他の項目にも適用できます。属性のようなマクロを使用する例を示しましょう。Web アプリケーションフレームワークを使用する際に、`route` という名前の属性が関数に注釈付けされるとします。

```rust
#[route(GET, "/")]
fn index() {
```

この `#[route]` 属性は、フレームワークによって手続き型マクロとして定義されます。マクロ定義関数のシグネチャは次のようになります。

    #[proc_macro_attribute]
    pub fn route(
        attr: TokenStream,
        item: TokenStream
    ) -> TokenStream {

ここでは、`TokenStream` 型の 2 つのパラメータがあります。最初は属性の内容に対するもので、`GET, "/"` の部分です。2 番目は、属性が付けられている項目の本体です。この場合、`fn index() {}` と関数本体の残り部分です。

それ以外は、属性のようなマクロはカスタム `derive` マクロと同じように機能します。`proc-macro` クレートタイプのクレートを作成し、生成したいコードを生成する関数を実装します！
