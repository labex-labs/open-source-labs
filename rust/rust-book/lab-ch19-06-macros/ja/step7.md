# 関数のようなマクロ

関数のようなマクロは、関数呼び出しのように見えるマクロを定義します。`macro_rules!` マクロと同様に、関数よりも柔軟です。たとえば、未知の数の引数を取ることができます。ただし、`macro_rules!` マクロは、「一般的なメタプログラミング用の `macro_rules!` を使った宣言的マクロ」で説明したマッチのような構文を使ってのみ定義できます。関数のようなマクロは `TokenStream` パラメータを取り、その定義は、他の 2 種類の手続き型マクロと同じように、Rust コードを使ってその `TokenStream` を操作します。関数のようなマクロの例は、次のように呼び出される `sql!` マクロです。

```rust
let sql = sql!(SELECT * FROM posts WHERE id=1);
```

このマクロは、内部の SQL 文を解析し、構文的に正しいことを確認します。これは、`macro_rules!` マクロが行うことよりもはるかに複雑な処理です。`sql!` マクロは次のように定義されます。

```rust
#[proc_macro]
pub fn sql(input: TokenStream) -> TokenStream {
```

この定義は、カスタム `derive` マクロのシグネチャに似ています。丸括弧内のトークンを受け取り、生成したかったコードを返します。
