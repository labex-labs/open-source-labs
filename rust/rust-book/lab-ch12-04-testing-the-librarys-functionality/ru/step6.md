# Сохранение совпадающих строк

Для завершения этой функции нам нужно способ хранения совпадающих строк, которые мы хотим вернуть. Для этого мы можем создать изменяемый вектор перед циклом `for` и вызвать метод `push`, чтобы сохранить `line` в векторе. После цикла `for` мы возвращаем вектор, как показано в листинге 12-19.

Имя файла: `src/lib.rs`

```rust
pub fn search<'a>(
    query: &str,
    contents: &'a str,
) -> Vec<&'a str> {
    let mut results = Vec::new();

    for line in contents.lines() {
        if line.contains(query) {
            results.push(line);
        }
    }

    results
}
```

Листинг 12-19: Сохранение строк, которые совпадают, чтобы мы могли их вернуть

Теперь функция `search` должна возвращать только те строки, которые содержат `query`, и наш тест должен пройти. Запустим тест:

```bash
$ cargo test
--snip--
running 1 test
test tests::one_result... ok

test result: ok. 1 passed
0 failed
0 ignored
0 measured
0
filtered out
finished in 0.00s
```

Наш тест прошел, поэтому мы знаем, что это работает!

На этом этапе мы можем рассмотреть возможности для рефакторинга реализации функции поиска, сохраняя при этом проход тестов для поддержания той же функциональности. Код в функции поиска не太差, но он не использует некоторые полезные функции итераторов. Мы вернемся к этому примеру в главе 13, где мы подробно изучим итераторы и рассмотрим, как его улучшить.
