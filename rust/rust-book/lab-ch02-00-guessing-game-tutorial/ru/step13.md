# Генерация случайного числа

Давайте начнем использовать `rand` для генерации числа, которое нужно угадать. Следующим шагом будет обновление `src/main.rs`, как показано в Листинге 2-3.

Имя файла: `src/main.rs`

```rust
use std::io;
1 use rand::Rng;

fn main() {
    println!("Guess the number!");

  2 let secret_number = rand::thread_rng().gen_range(1..=100);

  3 println!("The secret number is: {secret_number}");

    println!("Please input your guess.");

    let mut guess = String::new();

    io::stdin()
     .read_line(&mut guess)
     .expect("Failed to read line");

    println!("You guessed: {guess}");
}
```

Листинг 2-3: Добавление кода для генерации случайного числа

Во - первых, мы добавляем строку `use rand::Rng;` \[1\]. Трейт `Rng` определяет методы, которые реализуют генераторы случайных чисел, и этот трейт должен быть в области видимости, чтобы мы могли использовать эти методы. Глава 10 подробно рассмотрит трейты.

Далее, мы добавляем две строки посередине. В первой строке \[2\] мы вызываем функцию `rand::thread_rng`, которая дает нам конкретный генератор случайных чисел, который мы собираемся использовать: генератор, локальный для текущего потока выполнения и инициализированный операционной системой. Затем мы вызываем метод `gen_range` на генераторе случайных чисел. Этот метод определен трейтом `Rng`, который мы подключили к области видимости с помощью инструкции `use rand::Rng;`. Метод `gen_range` принимает выражение диапазона в качестве аргумента и генерирует случайное число в этом диапазоне. Тип выражения диапазона, который мы используем здесь, имеет форму `start..=end` и включает нижнюю и верхнюю границы, поэтому мы должны указать `1..=100`, чтобы запросить число от 1 до 100.

> Примечание: Вы не сразу поймете, какие трейты использовать и какие методы и функции вызывать из пакета, поэтому каждый пакет имеет документацию с инструкциями по использованию. Еще одна удобная особенность Cargo заключается в том, что запуск команды `cargo doc --open` будет собирать документацию, предоставленную всеми вашими зависимостями локально и открывать ее в вашем браузере. Если вы интересуетесь другой функциональностью в пакете `rand`, например, запустите `cargo doc --open` и нажмите на `rand` в боковой панели слева.

Вторая новая строка \[3\] выводит секретное число. Это полезно при разработке программы для ее тестирования, но мы удалим ее из финальной версии. Если программа сразу же выводит ответ, когда запускается, это не очень похоже на игру!

Попробуйте запустить программу несколько раз:

```bash
$ cargo run
   Compiling guessing_game v0.1.0 (file:///projects/guessing_game)
    Finished dev [unoptimized + debuginfo] target(s) in 2.53s
     Running `target/debug/guessing_game`
Guess the number!
The secret number is: 7
Please input your guess.
4
You guessed: 4

$ cargo run
    Finished dev [unoptimized + debuginfo] target(s) in 0.02s
     Running `target/debug/guessing_game`
Guess the number!
The secret number is: 83
Please input your guess.
5
You guessed: 5
```

Вы должны получить разные случайные числа, и они должны все быть числами от 1 до 100. Отличная работа!
