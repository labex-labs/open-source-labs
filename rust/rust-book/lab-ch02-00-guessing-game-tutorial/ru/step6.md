# Обработка возможных ошибок с помощью Result

Мы все еще работаем над этой строкой кода. Теперь мы обсуждаем третью строку текста, но обратите внимание, что это по-прежнему часть одной логической строки кода. Следующая часть - это этот метод:

```rust
.expect("Failed to read line");
```

Мы могли бы написать этот код так:

```rust
io::stdin().read_line(&mut guess).expect("Failed to read line");
```

Однако одна длинная строка трудно читать, поэтому лучше разделить ее. Часто имеет смысл вставить перевод строки и другие пробелы, чтобы разбить длинные строки, когда вы вызываете метод с синтаксисом `.method_name()`. Теперь давайте обсудим, что делает эта строка.

Как упоминалось ранее, `read_line` помещает то, что вводит пользователь, в строку, которую мы передаем ей, но она также возвращает значение `Result`. `Result` - это _перечисление_, часто называемое _enum_, которое представляет собой тип, который может находиться в одном из нескольких возможных состояний. Мы называем каждое возможное состояние _вариантом_.

Глава 6 более подробно рассмотрит enums. Цель этих типов `Result` - это закодирование информации об обработке ошибок.

Варианты `Result` - это `Ok` и `Err`. Вариант `Ok` указывает, что операция прошла успешно, и внутри `Ok` находится успешно сгенерированное значение. Вариант `Err` означает, что операция завершилась неудачей, и `Err` содержит информацию о том, как или почему операция завершилась неудачей.

Значения типа `Result`, как и значения любого типа, имеют определенные на них методы. Экземпляр `Result` имеет метод `expect`, который вы можете вызвать. Если этот экземпляр `Result` является значением `Err`, `expect` вызовет аварийное завершение программы и выведет сообщение, которое вы передали в качестве аргумента в `expect`. Если метод `read_line` возвращает `Err`, это, вероятно, будет результатом ошибки, возникающей в основе операционной системы. Если этот экземпляр `Result` является значением `Ok`, `expect` возьмет возвращаемое значение, которое хранит `Ok`, и вернет вам только это значение, чтобы вы могли использовать его. В этом случае это значение - это количество байт в вводе пользователя.

Если вы не вызовете `expect`, программа скомпилируется, но вы получите предупреждение:

```bash
$ cargo build
   Compiling guessing_game v0.1.0 (file:///projects/guessing_game)
warning: unused `Result` that must be used
  --> src/main.rs:10:5
   |
10 |     io::stdin().read_line(&mut guess);
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   |
   = note: `#[warn(unused_must_use)]` on by default
   = note: this `Result` may be an `Err` variant, which should be handled

warning: `guessing_game` (bin "guessing_game") generated 1 warning
    Finished dev [unoptimized + debuginfo] target(s) in 0.59s
```

Rust предупреждает, что вы не использовали значение `Result`, возвращаемое из `read_line`, что означает, что программа не обрабатывает возможную ошибку.

Правильный способ подавить предупреждение - это на самом деле написать код обработки ошибок, но в нашем случае мы просто хотим аварийно завершить эту программу, когда возникает проблема, поэтому мы можем использовать `expect`. В главе 9 вы узнаете, как восстанавливаться после ошибок.
