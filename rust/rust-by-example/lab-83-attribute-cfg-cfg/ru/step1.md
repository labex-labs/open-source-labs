# `cfg`

Возможны условные проверки конфигурации с помощью двух различных операторов:

- атрибут `cfg`: `#[cfg(...)]` в позиции атрибута
- макрос `cfg!`: `cfg!(...)` в логических выражениях

В то время как первый позволяет выполнять условную компиляцию, второй условно вычисляется до `true` или `false` литералов, что позволяет выполнять проверки во время выполнения. Оба используют идентичный синтаксис аргументов.

`cfg!`, в отличие от `#[cfg]`, не удаляет никакого кода и только вычисляется до true или false. Например, все блоки в выражении if/else должны быть валидными, когда `cfg!` используется для условия, независимо от того, что оценивает `cfg!`.

```rust
// Эта функция компилируется только если целевая ОС - linux
#[cfg(target_os = "linux")]
fn are_you_on_linux() {
    println!("You are running linux!");
}

// А эта функция компилируется только если целевая ОС *не* linux
#[cfg(not(target_os = "linux"))]
fn are_you_on_linux() {
    println!("You are *not* running linux!");
}

fn main() {
    are_you_on_linux();

    println!("Are you sure?");
    if cfg!(target_os = "linux") {
        println!("Yes. It's definitely linux!");
    } else {
        println!("Yes. It's definitely *not* linux!");
    }
}
```
