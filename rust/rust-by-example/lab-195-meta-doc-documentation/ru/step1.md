# Документация

Используйте `cargo doc` для создания документации в `target/doc`.

Используйте `cargo test` для запуска всех тестов (включая тесты документации), и `cargo test --doc` для запуска только тестов документации.

Эти команды будут вызывать `rustdoc` (и `rustc`) по необходимости.

## Doc-комментарии

Doc-комментарии очень полезны для крупных проектов, требующих документации. При запуске `rustdoc` эти комментарии компилируются в документацию. Они обозначаются `///` и поддерживают \[Markdown\].

````rust
#![crate_name = "doc"]

/// Здесь представлен человек
pub struct Person {
    /// У человека должен быть имя, неважно, насколько это может ненавидеть Джульетта
    name: String,
}

impl Person {
    /// Возвращает человека с заданным именем
    ///
    /// # Аргументы
    ///
    /// * `name` - Строковый срез, содержащий имя человека
    ///
    /// # Примеры
    ///
    /// ```
    /// // В комментариях между границами можно писать код на Rust
    /// // Если передать --test в `rustdoc`, он даже запустит тесты для вас!
    /// use doc::Person;
    /// let person = Person::new("name");
    /// ```
    pub fn new(name: &str) -> Person {
        Person {
            name: name.to_string(),
        }
    }

    /// Дает дружелюбное приветствие!
    ///
    /// Говорит "Привет, [имя](Person::name)" для `Person`, на котором вызывается.
    pub fn hello(& self) {
        println!("Hello, {}!", self.name);
    }
}

fn main() {
    let john = Person::new("John");

    john.hello();
}
````

Для запуска тестов сначала соберите код в виде библиотеки, а затем укажите `rustdoc`, где найти библиотеку, чтобы он мог связать ее с каждым тестовым программой doctest:

```shell
$ rustc doc.rs --crate-type lib
$ rustdoc --test --extern doc="libdoc.rlib" doc.rs
```

## Doc-атрибуты

Ниже приведены несколько примеров наиболее распространенных `#[doc]`-атрибутов, используемых с `rustdoc`.

## `inline`

Используется для встраивания документации вместо ссылки на отдельную страницу.

```rust
#[doc(inline)]
pub use bar::Bar;

/// Документация для bar
mod bar {
    /// Документация для Bar
    pub struct Bar;
}
```

## `no_inline`

Используется для предотвращения ссылки на отдельную страницу или вообще любых ссылок.

```rust
// Пример из libcore/prelude
#[doc(no_inline)]
pub use crate::mem::drop;
```

## `hidden`

Использование этого атрибута сообщает `rustdoc` не включать это в документацию:

```rust
// Пример из библиотеки futures-rs
#[doc(hidden)]
pub use self::async_await::*;
```

Для документации `rustdoc` широко используется сообществом. Именно с его помощью генерируются [документации стандартной библиотеки](https://doc.rust-lang.org/std/).
