# Алиасинг

Данные могут быть неизменяемым образом заимствованы любое количество раз, но в то время, когда они неизменяемым образом заимствованы, исходные данные не могут быть изменяемым образом заимствованы. С другой стороны, разрешается только _один_ изменяемый заимствование за раз. Исходные данные могут быть заимствованы снова только _после_, как изменяемая ссылка была использована в последний раз.

```rust
struct Point { x: i32, y: i32, z: i32 }

fn main() {
    let mut point = Point { x: 0, y: 0, z: 0 };

    let borrowed_point = &point;
    let another_borrow = &point;

    // Данные могут быть получены через ссылки и исходного владельца
    println!("Point has coordinates: ({}, {}, {})",
                borrowed_point.x, another_borrow.y, point.z);

    // Ошибка! Нельзя заимствовать `point` как изменяемый, потому что он
    // в настоящее время заимствован как неизменяемый.
    // let mutable_borrow = &mut point;
    // TODO ^ Попробуйте раскомментировать эту строку

    // Займствованные значения используются снова здесь
    println!("Point has coordinates: ({}, {}, {})",
                borrowed_point.x, another_borrow.y, point.z);

    // Неизменяемые ссылки больше не используются в оставшейся части кода, поэтому
    // можно снова заимствовать с изменяемой ссылкой.
    let mutable_borrow = &mut point;

    // Изменить данные через изменяемую ссылку
    mutable_borrow.x = 5;
    mutable_borrow.y = 2;
    mutable_borrow.z = 1;

    // Ошибка! Нельзя заимствовать `point` как неизменяемый, потому что он
    // в настоящее время заимствован как изменяемый.
    // let y = &point.y;
    // TODO ^ Попробуйте раскомментировать эту строку

    // Ошибка! Нельзя напечатать, потому что `println!` требует неизменяемой ссылки.
    // println!("Point Z coordinate is {}", point.z);
    // TODO ^ Попробуйте раскомментировать эту строку

    // Ок! Изменяемые ссылки могут быть переданы как неизменяемые в `println!`
    println!("Point has coordinates: ({}, {}, {})",
                mutable_borrow.x, mutable_borrow.y, mutable_borrow.z);

    // Изменяемая ссылка больше не используется в оставшейся части кода, поэтому
    // можно снова заимствовать
    let new_borrowed_point = &point;
    println!("Point now has coordinates: ({}, {}, {})",
             new_borrowed_point.x, new_borrowed_point.y, new_borrowed_point.z);
}
```
