# 距離を計算する関数を作成する

点と線分の間の距離を計算する関数を作成する必要があります。この関数は、後で新しい頂点をポリゴンに追加するかどうかを判断するために使用されます。

```python
def dist_point_to_segment(p, s0, s1):
    """
    点 *p* から線分 (*s0*, *s1*) までの距離を取得します。ここで、
    *p*, *s0*, *s1* は ``[x, y]`` 配列です。
    """
    s01 = s1 - s0
    s0p = p - s0
    if (s01 == 0).all():
        return np.hypot(*s0p)
    # 線分の端点を超えないように線分上に射影します。
    p1 = s0 + np.clip((s0p @ s01) / (s01 @ s01), 0, 1) * s01
    return np.hypot(*(p - p1))
```
