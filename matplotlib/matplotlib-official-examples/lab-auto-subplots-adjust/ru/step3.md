# Определяем функцию обратного вызова для рисования

Мы определим функцию, которая будет вызываться каждый раз при рисовании графика. Эта функция будет вычислять ограничивающие прямоугольники меток по оси y, определять, оставляет ли подграфик достаточно места для меток, и настраивать параметры подграфика, если необходимо.

```python
def on_draw(event):
    bboxes = []
    for label in ax.get_yticklabels():
        # Граница прямоугольника в пикселях
        bbox_px = label.get_window_extent()
        # Преобразуем в относительные координаты фигуры. Это обратное
        # преобразование transFigure.
        bbox_fig = bbox_px.transformed(fig.transFigure.inverted())
        bboxes.append(bbox_fig)
    # Граница прямоугольника, охватывающая все ограничивающие прямоугольники,
    # снова в относительных координатах фигуры
    bbox = mtransforms.Bbox.union(bboxes)
    if fig.subplotpars.left < bbox.width:
        # Сдвиньте левую границу подграфика даль вправо
        fig.subplots_adjust(left=1.1*bbox.width)  # добавьте небольшой отступ
        fig.canvas.draw()
```
