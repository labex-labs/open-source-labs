# Использование регулярных выражений для сопоставления шаблонов

Для преобразования строк в snake case мы будем использовать регулярные выражения (regex), чтобы определить границы слов. Модуль `re` в Python предоставляет мощные возможности по сопоставлению шаблонов, которые мы можем использовать для этой задачи.

Давайте обновим нашу функцию, чтобы она могла обрабатывать строки в формате camelCase:

1. Сначала нам нужно определить шаблон, когда строчная буква следует за заглавной (как в "camelCase").
2. Затем мы вставим пробел между ними.
3. Наконец, мы преобразуем все в нижний регистр и заменим пробелы на подчеркивания.

Обновите файл `snake_case.py` с этой улучшенной функцией:

```python
import re

def snake(s):
    # Replace pattern of a lowercase letter followed by uppercase with lowercase, space, uppercase
    s1 = re.sub('([a-z])([A-Z])', r'\1 \2', s)

    # Replace spaces with underscores and convert to lowercase
    return s1.lower().replace(' ', '_')

# Test with a simple example
if __name__ == "__main__":
    test_string = "helloWorld"
    result = snake(test_string)
    print(f"Original: {test_string}")
    print(f"Snake case: {result}")
```

Давайте разберем, что делает эта функция:

- `re.sub('([a-z])([A-Z])', r'\1 \2', s)` ищет шаблоны, где строчная буква `([a-z])` следует за заглавной буквой `([A-Z])`. Затем он заменяет этот шаблон на те же буквы, но добавляет пробел между ними с помощью `\1` и `\2`, которые ссылаются на захваченные группы.
- Затем мы преобразуем все в нижний регистр с помощью `lower()` и заменяем пробелы на подчеркивания.

Запустите скрипт еще раз, чтобы проверить, работает ли он для строк в формате camelCase:

```bash
python3 ~/project/snake_case.py
```

Теперь вывод должен быть таким:

```
Original: helloWorld
Snake case: hello_world
```

Отлично! Теперь наша функция может обрабатывать строки в формате camelCase. На следующем шаге мы усовершенствуем ее, чтобы она могла обрабатывать более сложные случаи.
