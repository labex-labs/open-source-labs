# Python 의 일급 객체 이해

Python 에서는 모든 것이 객체로 취급됩니다. 여기에는 함수와 타입이 포함됩니다. 이것이 무엇을 의미할까요? 함수와 타입을 데이터 구조에 저장하고, 다른 함수의 인수로 전달하고, 심지어 다른 함수에서 반환할 수도 있다는 의미입니다. 이것은 매우 강력한 개념이며, CSV 데이터 처리를 예로 들어 살펴보겠습니다.

## 일급 타입 탐구

먼저, Python 인터프리터를 시작해 보겠습니다. WebIDE 에서 새 터미널을 열고 다음 명령을 입력합니다. 이 명령은 Python 코드를 실행할 Python 인터프리터를 시작합니다.

```bash
python3
```

Python 에서 CSV 파일을 사용할 때, 이러한 파일에서 읽은 문자열을 적절한 데이터 타입으로 변환해야 하는 경우가 많습니다. 예를 들어, CSV 파일의 숫자는 문자열로 읽힐 수 있지만, Python 코드에서는 정수 또는 부동 소수점으로 사용하고 싶을 수 있습니다. 이를 위해 변환 함수 목록을 만들 수 있습니다.

```python
coltypes = [str, int, float]
```

문자열이 아닌 실제 타입 함수를 포함하는 목록을 만들고 있다는 점에 유의하십시오. Python 에서 타입은 일급 객체 (first-class object) 이므로 다른 객체와 마찬가지로 취급할 수 있습니다. 목록에 넣고, 전달하고, 코드에서 사용할 수 있습니다.

이제 포트폴리오 CSV 파일에서 데이터를 읽어 이러한 변환 함수를 어떻게 사용할 수 있는지 살펴보겠습니다.

```python
import csv
f = open('portfolio.csv')
rows = csv.reader(f)
headers = next(rows)
row = next(rows)
print(row)
```

이 코드를 실행하면 다음과 유사한 출력을 볼 수 있습니다. 이것은 CSV 파일의 첫 번째 행 데이터이며, 문자열 목록으로 표현됩니다.

```
['AA', '100', '32.20']
```

다음으로, `zip` 함수를 사용합니다. `zip` 함수는 여러 반복 가능한 객체 (예: 목록 또는 튜플) 를 가져와 해당 요소들을 쌍으로 묶습니다. 각 행의 값과 해당 타입 변환 함수를 쌍으로 묶는 데 사용합니다.

```python
r = list(zip(coltypes, row))
print(r)
```

그러면 다음과 같은 출력이 생성됩니다. 각 쌍은 타입 함수와 CSV 파일의 문자열 값을 포함합니다.

```
[(<class 'str'>, 'AA'), (<class 'int'>, '100'), (<class 'float'>, '32.20')]
```

이제 이러한 쌍이 있으므로 각 함수를 적용하여 값을 적절한 타입으로 변환할 수 있습니다.

```python
record = [func(val) for func, val in zip(coltypes, row)]
print(record)
```

출력은 값이 적절한 타입으로 변환되었음을 보여줍니다. 문자열 'AA'는 문자열로 유지되고, '100'은 정수 100 이 되며, '32.20'은 부동 소수점 32.2 가 됩니다.

```
['AA', 100, 32.2]
```

또한 이러한 값을 열 이름과 결합하여 딕셔너리를 만들 수도 있습니다. 딕셔너리는 Python 에서 키 - 값 쌍을 저장할 수 있는 유용한 데이터 구조입니다.

```python
record_dict = dict(zip(headers, record))
print(record_dict)
```

출력은 키가 열 이름이고 값이 변환된 데이터인 딕셔너리가 됩니다.

```
{'name': 'AA', 'shares': 100, 'price': 32.2}
```

이 모든 단계를 단일 컴프리헨션 (comprehension) 으로 수행할 수 있습니다. 컴프리헨션은 Python 에서 목록, 딕셔너리 또는 집합을 만드는 간결한 방법입니다.

```python
result = {name: func(val) for name, func, val in zip(headers, coltypes, row)}
print(result)
```

출력은 이전과 동일한 딕셔너리가 됩니다.

```
{'name': 'AA', 'shares': 100, 'price': 32.2}
```

Python 인터프리터에서 작업을 마쳤으면 다음 명령을 입력하여 종료할 수 있습니다.

```python
exit()
```

이 데모는 Python 이 함수를 일급 객체로 취급하는 방식이 강력한 데이터 처리 기술을 어떻게 가능하게 하는지 보여줍니다. 타입과 함수를 객체로 취급할 수 있으므로 더 유연하고 간결한 코드를 작성할 수 있습니다.
