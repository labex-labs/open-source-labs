# 探索数据集

让我们从仔细研究将要使用的数据集开始我们的旅程。文件 `ctabus.csv` 是一个 CSV（逗号分隔值）文件。CSV 文件是存储表格数据的常用方法，其中每一行代表一个行，行内的值用逗号分隔。这个特定的文件包含芝加哥交通管理局（Chicago Transit Authority, CTA）公交系统的每日乘客量数据，涵盖从 2001 年 1 月 1 日到 2013 年 8 月 31 日的期间。

解压文件并删除 zip 文件：

```bash
cd /home/labex/project
unzip ctabus.csv.zip
rm ctabus.csv.zip
```

为了理解这个文件的结构，我们首先要查看它的内部。我们将使用 Python 读取文件并打印一些行。打开终端并运行以下 Python 代码：

```python
f = open('/home/labex/project/ctabus.csv')
print(next(f))  # 读取标题行
print(next(f))  # 读取第一条数据行
print(next(f))  # 读取第二条数据行
f.close()
```

在这段代码中，我们首先使用 `open` 函数打开文件，并将其赋值给变量 `f`。 `next` 函数用于从文件中读取下一行。我们使用它三次：第一次读取标题行，标题行通常包含数据集中列的名称。第二次和第三次，我们分别读取第一条和第二条数据行。最后，我们使用 `close` 方法关闭文件，以释放系统资源。

你应该看到类似这样的输出：

```
route,date,daytype,rides

3,01/01/2001,U,7354

4,01/01/2001,U,9288
```

此输出显示该文件有 4 列数据。让我们分解一下每一列代表什么：

1. `route`：这是公交线路名称或号码。它是数据集中的第一列（第 0 列）。
2. `date`：这是一个日期字符串，格式为 MM/DD/YYYY。这是第二列（第 1 列）。
3. `daytype`：这是一个日期类型代码，它是第三列（第 2 列）。
   - U = 星期日/假日
   - A = 星期六
   - W = 工作日
4. `rides`：此列记录了总乘客数，为一个整数。它是第四列（第 3 列）。

`rides` 列告诉我们，在特定日期，特定线路上有多少人乘坐了公交车。例如，从上面的输出中，我们可以看到 2001 年 1 月 1 日有 7354 人乘坐了 3 路公交车。

现在，让我们找出文件中包含多少行。了解行数可以让我们了解数据集的大小。运行以下 Python 代码：

```python
with open('/home/labex/project/ctabus.csv') as f:
    line_count = sum(1 for line in f)
    print(f"Total lines in the file: {line_count}")
```

在这段代码中，我们使用 `with` 语句打开文件。使用 `with` 的优点是，它会在我们完成文件操作后自动关闭文件。然后，我们使用生成器表达式 `(1 for line in f)` 创建一个 1 的序列，文件中每一行对应一个 1。 `sum` 函数将所有这些 1 相加，从而得出文件中的总行数。最后，我们打印出结果。

这应该输出大约 577564 行，这意味着我们正在处理一个相当大的数据集。这个大型数据集将为我们提供大量数据，以供分析和从中获得见解。
