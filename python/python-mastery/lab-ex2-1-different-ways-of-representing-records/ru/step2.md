# Основной расход памяти при работе с текстом

Построим базовую картину потребления памяти при работе с этим файлом данных. Во - первых, перезапустите Python и проведите очень простой эксперимент: просто прочитайте файл и сохраните его данные в одну строку:

```python
>>> # --- RESTART
>>> import tracemalloc
>>> f = open('ctabus.csv')
>>> tracemalloc.start()
>>> data = f.read()
>>> len(data)
12361039
>>> current, peak = tracemalloc.get_traced_memory()
>>> current
12369664
>>> peak
24730766
>>>
```

Ваши результаты могут отличаться несколько, но вы должны увидеть текущее использование памяти в пределах 12 МБ, а пиковое - около 24 МБ.

Что произойдет, если прочитать весь файл в список строк? Перезапустите Python и попробуйте это:

```python
>>> # --- RESTART
>>> import tracemalloc
>>> f = open('/home/labex/project/ctabus.csv')
>>> tracemalloc.start()
>>> lines = f.readlines()
>>> len(lines)
577564
>>> current, peak = tracemalloc.get_traced_memory()
>>> current
45828030
>>> peak
45867371
>>>
```

Вы должны увидеть значительное увеличение использования памяти до 40 - 50 МБ. Вопрос для размышления: откуда может быть взята эта дополнительная накладная?
