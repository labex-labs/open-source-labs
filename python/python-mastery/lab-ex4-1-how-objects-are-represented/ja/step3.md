# オブジェクト属性の追加と変更

Python では、オブジェクトは辞書に基づいて実装されています。この実装により、Python はオブジェクト属性を扱う際に高い柔軟性を持っています。他のいくつかのプログラミング言語とは異なり、Python はオブジェクトの属性をクラスで定義されたものに限定しません。これは、オブジェクトが作成された後でも、いつでも新しい属性をオブジェクトに追加できることを意味します。

この柔軟性を、インスタンスの 1 つに新しい属性を追加することで探ってみましょう。クラスのインスタンス `goog` があるとします。これに `date` 属性を追加します。

```python
>>> goog.date = "6/11/2007"
>>> goog.__dict__
{'name': 'GOOG', 'shares': 100, 'price': 490.1, 'date': '6/11/2007'}
```

ここでは、`goog` インスタンスに新しい属性 `date` を追加しました。この `date` 属性は `SimpleStock` クラスで定義されていないことに注意してください。この新しい属性は `goog` インスタンスにのみ存在します。これを確認するために、`ibm` インスタンスをチェックしてみましょう。

```python
>>> ibm.__dict__
{'name': 'IBM', 'shares': 50, 'price': 91.23}
>>> hasattr(ibm, 'date')
False
```

見てのとおり、`ibm` インスタンスには `date` 属性がありません。これは、Python オブジェクトの 3 つの重要な特性を示しています。

1. 各インスタンスは独自の属性セットを持っています。
2. オブジェクトが作成された後でも属性を追加できます。
3. あるインスタンスに属性を追加しても、他のインスタンスには影響しません。

では、属性を追加する別の方法を試してみましょう。ドット表記を使う代わりに、オブジェクトの基礎となる辞書を直接操作します。Python では、各オブジェクトには特殊な属性 `__dict__` があり、これにすべての属性がキーと値のペアとして格納されています。

```python
>>> goog.__dict__['time'] = '9:45am'
>>> goog.time
'9:45am'
>>> goog.__dict__
{'name': 'GOOG', 'shares': 100, 'price': 490.1, 'date': '6/11/2007', 'time': '9:45am'}
```

`__dict__` 辞書を直接変更することで、`goog` インスタンスに新しい属性 `time` を追加しました。`goog.time` にアクセスすると、Python は `__dict__` 辞書内の 'time' キーを探し、対応する値を返します。

これらの例は、Python のオブジェクトが本質的にいくつかの追加機能を持った辞書であることを示しています。Python オブジェクトの柔軟性により、動的な変更が可能であり、これはプログラミングにおいて非常に強力で便利です。
