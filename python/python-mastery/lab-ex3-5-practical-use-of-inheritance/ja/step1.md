# 問題の理解

この実験では、Python の継承について学び、継承が拡張可能で適応性の高いコードを作成するのにどのように役立つかを見ていきます。継承は、オブジェクト指向プログラミングにおける強力な概念で、あるクラスが別のクラスから属性とメソッドを継承することができます。これにより、コードを再利用し、既存のコードの上により複雑な機能を構築することができます。

まずは、既存の `print_table()` 関数を見てみましょう。この関数を改良して、出力形式に関してより柔軟にする予定です。

まず、WebIDE エディタで `tableformat.py` ファイルを開く必要があります。このファイルのパスは次の通りです。

```
/home/labex/project/tableformat.py
```

ファイルを開くと、`print_table()` 関数の現在の実装が表示されます。この関数は、表形式のデータを整形して出力するように設計されています。主に 2 つの入力を受け取ります。レコード（オブジェクト）のリストとフィールド名のリストです。これらの入力に基づいて、きれいに整形された表を出力します。

では、この関数がどのように動作するかをテストしてみましょう。WebIDE でターミナルを開き、次の Python コマンドを実行します。これらのコマンドは、必要なモジュールをインポートし、CSV ファイルからデータを読み取り、`print_table()` 関数を使用してデータを表示します。

```python
import stock
import reader
import tableformat

portfolio = reader.read_csv_as_instances('portfolio.csv', stock.Stock)
tableformat.print_table(portfolio, ['name', 'shares', 'price'])
```

これらのコマンドを実行すると、次の出力が表示されるはずです。

```
      name     shares      price
---------- ---------- ----------
        AA        100       32.2
       IBM         50       91.1
       CAT        150      83.44
      MSFT        200      51.23
        GE         95      40.37
      MSFT         50       65.1
       IBM        100      70.44
```

出力は良好に見えますが、この関数には制限があります。現在、この関数はプレーンテキストという 1 つの出力形式のみをサポートしています。実際のシナリオでは、CSV、HTML などの異なる形式でデータを出力したい場合があります。

新しい出力形式をサポートするたびに `print_table()` 関数を変更する代わりに、継承を使用してより柔軟な解決策を作成することができます。以下にその方法を示します。

1. 基本の `TableFormatter` クラスを定義します。このクラスには、データを整形するためのメソッドが含まれます。基本クラスは、すべてのサブクラスが基にする共通の構造と機能を提供します。
2. 様々なサブクラスを作成します。各サブクラスは、異なる出力形式用に設計されます。たとえば、あるサブクラスは CSV 出力用、別のサブクラスは HTML 出力用などです。これらのサブクラスは、基本クラスのメソッドを継承し、独自の特定の機能を追加することもできます。
3. `print_table()` 関数を修正して、任意のフォーマッタで動作するようにします。これは、`TableFormatter` クラスの異なるサブクラスを `print_table()` 関数に渡すことができ、適切な整形メソッドを使用できることを意味します。

このアプローチには大きな利点があります。`print_table()` 関数の核心機能を変更することなく、新しい出力形式を追加することができます。したがって、要件が変化し、より多くの出力形式をサポートする必要がある場合、新しいサブクラスを作成することで簡単に対応できます。
