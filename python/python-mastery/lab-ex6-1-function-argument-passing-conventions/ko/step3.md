# 객체 표현 개선하기

`Structure` 클래스는 객체를 생성하고 액세스하는 데 유용합니다. 그러나 현재 문자열로 자체를 표현하는 좋은 방법이 없습니다. 객체를 인쇄하거나 Python 인터프리터에서 볼 때, 명확하고 유익한 표시를 보고 싶을 것입니다. 이는 객체가 무엇이고 해당 값이 무엇인지 이해하는 데 도움이 됩니다.

## Python 의 객체 표현 이해하기

Python 에는 객체를 다양한 방식으로 표현하는 데 사용되는 두 가지 특수 메서드가 있습니다. 이러한 메서드는 객체가 표시되는 방식을 제어할 수 있으므로 중요합니다.

- `__str__` - 이 메서드는 `str()` 함수와 `print()` 함수에서 사용됩니다. 객체의 사람이 읽을 수 있는 표현을 제공합니다. 예를 들어, `Stock` 객체가 있는 경우 `__str__` 메서드는 "Stock: GOOG, 100 shares at $490.1"과 같은 것을 반환할 수 있습니다.
- `__repr__` - 이 메서드는 Python 인터프리터와 `repr()` 함수에서 사용됩니다. 객체의 보다 기술적이고 명확한 표현을 제공합니다. `__repr__`의 목표는 객체를 다시 만들 수 있는 문자열을 제공하는 것입니다. 예를 들어, `Stock` 객체의 경우 "Stock('GOOG', 100, 490.1)"을 반환할 수 있습니다.

`Structure` 클래스에 `__repr__` 메서드를 추가해 보겠습니다. 이렇게 하면 객체의 상태를 명확하게 볼 수 있으므로 코드를 디버깅하기가 더 쉬워집니다.

## 좋은 표현 구현하기

이제 `structure.py` 파일을 업데이트해야 합니다. `__repr__` 메서드를 `Structure` 클래스에 추가합니다. 이 메서드는 객체를 다시 만드는 데 사용할 수 있는 방식으로 객체를 나타내는 문자열을 생성합니다.

```python
def __repr__(self):
    """
    객체를 다시 만드는 데 사용할 수 있는 객체의 표현을 반환합니다.
    예: Stock('GOOG', 100, 490.1)
    """
    # 클래스 이름 가져오기
    cls_name = type(self).__name__

    # 모든 필드 값 가져오기
    values = [getattr(self, name) for name in self._fields]

    # 필드와 값의 형식 지정
    args_str = ', '.join(repr(value) for value in values)

    # 형식 지정된 문자열 반환
    return f"{cls_name}({args_str})"
```

다음은 이 메서드가 수행하는 단계별 작업입니다.

1.  `type(self).__name__`을 사용하여 클래스 이름을 가져옵니다. 이는 처리하고 있는 객체의 종류를 알려주므로 중요합니다.
2.  인스턴스에서 모든 필드 값을 검색합니다. 이를 통해 객체가 보유한 데이터를 얻을 수 있습니다.
3.  클래스 이름과 값을 사용하여 문자열 표현을 생성합니다. 이 문자열은 객체를 다시 만드는 데 사용할 수 있습니다.

## 개선된 표현 테스트하기

향상된 구현을 테스트해 보겠습니다. `test_repr.py`라는 새 파일을 만듭니다. 이 파일은 클래스의 일부 인스턴스를 생성하고 해당 표현을 인쇄합니다.

```python
# test_repr.py
from structure import Stock, Point, Date

# 인스턴스 생성
s = Stock('GOOG', 100, 490.1)
p = Point(3, 4)
d = Date(2023, 11, 9)

# 표현 인쇄
print(repr(s))
print(repr(p))
print(repr(d))

# 직접 인쇄도 인터프리터에서 __repr__을 사용합니다.
print(s)
print(p)
print(d)
```

테스트를 실행하려면 터미널을 열고 다음 명령을 입력합니다.

```bash
python3 test_repr.py
```

다음 출력이 표시되어야 합니다.

```
Stock('GOOG', 100, 490.1)
Point(3, 4)
Date(2023, 11, 9)
Stock('GOOG', 100, 490.1)
Point(3, 4)
Date(2023, 11, 9)
```

이 출력은 이전보다 훨씬 더 유익합니다. `Stock('GOOG', 100, 490.1)`을 보면 객체가 무엇을 나타내는지 즉시 알 수 있습니다. 이 문자열을 복사하여 코드에서 객체를 다시 만드는 데 사용할 수도 있습니다.

## 좋은 표현의 이점

좋은 `__repr__` 구현은 디버깅에 매우 유용합니다. 인터프리터에서 객체를 보거나 프로그램 실행 중에 로깅할 때, 명확한 표현은 문제를 빠르게 식별하는 데 도움이 됩니다. 객체의 정확한 상태를 확인하고 무엇이 잘못될 수 있는지 이해할 수 있습니다.
