# Хакерство кадров стеков

Одна из претензий к последней части заключается в том, что функция `__init__()` теперь выглядит довольно странно с тем вызовом `locals()`, вставленным в нее. Однако вы можете обойти это, если будете готовы сделать немного хакерства кадров стеков. Попробуйте этот вариант функции `_init()`:

```python
>>> import sys
>>> def _init():
        locs = sys._getframe(1).f_locals   # Получить локальные переменные вызывающего
        self = locs.pop('self')
        for name, val in locs.items():
            setattr(self, name, val)
>>>
```

В этом коде локальные переменные извлекаются из кадра стеков вызывающего. Вот модифицированное определение класса:

```python
>>> class Stock:
        def __init__(self, name, shares, price):
            _init()

>>> s = Stock('GOOG', 100, 490.1)
>>> s.name
'GOOG'
>>> s.shares
100
>>>
```

На этом этапе вы, вероятно, чувствуете себя довольно беспокойными. Да, вы только что написали функцию, которая добралась до кадра стеков другой функции и изучила ее локальные переменные.
