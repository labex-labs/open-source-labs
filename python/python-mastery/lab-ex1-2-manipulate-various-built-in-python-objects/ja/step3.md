# Python のリストを扱う

リストは Python のデータ構造の一種です。データ構造とは、データを効率的に使用できるように整理して保存する方法です。リストは非常に汎用性が高く、数値、文字列、さらには他のリストなど、さまざまな型のアイテムを格納することができます。このステップでは、リストに対する様々な操作の方法を学びます。

## 文字列からリストを作成する

Python のリストを扱い始めるには、まず Python の対話型セッションを開く必要があります。これは、Python コードをすぐに記述して実行できる特別な環境のようなものです。このセッションを開始するには、ターミナルに次のコマンドを入力します。

```bash
python3
```

Python の対話型セッションに入ったら、文字列からリストを作成しましょう。文字列は単なる文字の並びです。空白で区切られたいくつかの株式シンボルを含む文字列を定義し、その文字列をリストに変換します。各株式シンボルはリストの要素になります。

```python
>>> symbols = 'HPQ AAPL IBM MSFT YHOO GOOG'
>>> symlist = symbols.split()    # 文字列を空白で分割する
>>> symlist
['HPQ', 'AAPL', 'IBM', 'MSFT', 'YHOO', 'GOOG']
```

`split()` メソッドは、空白があるところで文字列を分割するために使用されます。分割された各部分は新しいリストの要素になります。

## リスト要素のアクセスと変更

文字列と同様に、リストもインデックス付けをサポートしています。インデックス付けとは、リスト内の個々の要素をその位置によってアクセスできることを意味します。Python では、リストの最初の要素のインデックスは 0、2 番目の要素のインデックスは 1 というようになります。また、負のインデックスを使用してリストの末尾から要素にアクセスすることもできます。最後の要素のインデックスは -1、最後から 2 番目の要素のインデックスは -2 というようになります。

文字列とは異なり、リストの要素は変更することができます。つまり、リスト内の要素の値を変更することができます。

```python
>>> symlist[0]    # 最初の要素
'HPQ'
>>> symlist[1]    # 2 番目の要素
'AAPL'
>>> symlist[-1]   # 最後の要素
'GOOG'
>>> symlist[-2]   # 最後から 2 番目の要素
'YHOO'

>>> symlist[2] = 'AIG'    # 3 番目の要素を置き換える
>>> symlist
['HPQ', 'AAPL', 'AIG', 'MSFT', 'YHOO', 'GOOG']
```

## リストの反復処理

多くの場合、リスト内の各要素に対して同じ操作を行う必要があります。このような場合、`for` ループを使用することができます。`for` ループを使用すると、リスト内の各要素を順番に処理し、特定のアクションを実行することができます。

```python
>>> for s in symlist:
...     print('s =', s)
...
```

このコードを実行すると、リスト内の各要素が `s =` というラベル付きで出力されます。

```
s = HPQ
s = AAPL
s = AIG
s = MSFT
s = YHOO
s = GOOG
```

## メンバーシップの確認

時には、特定のアイテムがリスト内に存在するかどうかを確認する必要があります。このような場合、`in` 演算子を使用することができます。`in` 演算子は、アイテムがリスト内に存在する場合は `True` を返し、存在しない場合は `False` を返します。

```python
>>> 'AIG' in symlist
True
>>> 'AA' in symlist
False
>>> 'CAT' in symlist
False
```

## 要素の追加と削除

リストには、要素を追加したり削除したりするための組み込みメソッドがあります。`append()` メソッドはリストの末尾に要素を追加します。`insert()` メソッドはリストの特定の位置に要素を挿入します。`remove()` メソッドは、要素の値に基づいてリストから要素を削除します。

```python
>>> symlist.append('RHT')    # 末尾に要素を追加する
>>> symlist
['HPQ', 'AAPL', 'AIG', 'MSFT', 'YHOO', 'GOOG', 'RHT']

>>> symlist.insert(1, 'AA')    # 特定の位置に挿入する
>>> symlist
['HPQ', 'AA', 'AAPL', 'AIG', 'MSFT', 'YHOO', 'GOOG', 'RHT']

>>> symlist.remove('MSFT')    # 値によって削除する
>>> symlist
['HPQ', 'AA', 'AAPL', 'AIG', 'YHOO', 'GOOG', 'RHT']
```

リスト内に存在しない要素を削除しようとすると、Python はエラーを発生させます。

```python
>>> symlist.remove('MSFT')
```

次のようなエラーメッセージが表示されます。

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ValueError: list.remove(x): x not in list
```

また、`index()` メソッドを使用して、リスト内の要素の位置を見つけることもできます。

```python
>>> symlist.index('YHOO')
4
>>> symlist[4]    # その位置の要素を確認する
'YHOO'
```

## リストのソート

リストはインプレースでソートすることができます。つまり、元のリストが変更されます。リストをアルファベット順または逆順にソートすることができます。

```python
>>> symlist.sort()    # アルファベット順にソートする
>>> symlist
['AA', 'AAPL', 'AIG', 'GOOG', 'HPQ', 'RHT', 'YHOO']

>>> symlist.sort(reverse=True)    # 逆順にソートする
>>> symlist
['YHOO', 'RHT', 'HPQ', 'GOOG', 'AIG', 'AAPL', 'AA']
```

## 入れ子リスト

リストは、他のリストを含む任意の型のオブジェクトを格納することができます。これを入れ子リストと呼びます。

```python
>>> nums = [101, 102, 103]
>>> items = [symlist, nums]
>>> items
[['YHOO', 'RHT', 'HPQ', 'GOOG', 'AIG', 'AAPL', 'AA'], [101, 102, 103]]
```

入れ子リスト内の要素にアクセスするには、複数のインデックスを使用します。最初のインデックスは外側のリスト要素を選択し、2 番目のインデックスは内側のリスト要素を選択します。

```python
>>> items[0]    # 最初の要素（symlist）
['YHOO', 'RHT', 'HPQ', 'GOOG', 'AIG', 'AAPL', 'AA']
>>> items[0][1]    # symlist の 2 番目の要素
'RHT'
>>> items[0][1][2]    # 'RHT' の 3 番目の文字
'T'
>>> items[1]    # 2 番目の要素（nums リスト）
[101, 102, 103]
>>> items[1][1]    # nums の 2 番目の要素
102
```

Python の対話型セッションでの作業が終了したら、次のように入力してセッションを終了できます。

```python
>>> exit()
```
