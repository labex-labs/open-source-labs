# Python の文字列を扱う

文字列は Python で最も一般的に使用されるデータ型の 1 つです。文字列はテキストを表すために使用され、文字、数字、記号を含むことができます。このステップでは、様々な文字列操作を探索します。これらは Python でテキストデータを扱うために不可欠なスキルです。

## 文字列の作成と定義

Python で文字列を扱い始めるには、まず Python の対話型シェルを開く必要があります。このシェルを使用すると、Python コードを一行ずつ記述して実行できるため、学習やテストに最適です。次のコマンドを使用して、再度 Python の対話型シェルを開きましょう。

```bash
python3
```

シェルが開いたら、文字列を定義することができます。この例では、株式のティッカーシンボルを含む文字列を作成します。Python では、テキストをシングルクォート (`'`) またはダブルクォート (`"`) で囲むことで、文字列を定義することができます。以下は、文字列の定義方法です。

```python
>>> symbols = 'AAPL IBM MSFT YHOO SCO'
>>> symbols
'AAPL IBM MSFT YHOO SCO'
```

これで、`symbols` という名前の文字列変数を作成し、値を割り当てました。変数名を入力して Enter キーを押すと、Python は文字列の値を表示します。

## 文字と部分文字列のアクセス

Python では、文字列にインデックスを付けて個々の文字にアクセスすることができます。インデックスは 0 から始まります。つまり、文字列の最初の文字のインデックスは 0、2 番目の文字のインデックスは 1 というようになります。負のインデックスもサポートされており、-1 は最後の文字、-2 は最後から 2 番目の文字を指します。

`symbols` 文字列の個々の文字にアクセスする方法を見てみましょう。

```python
>>> symbols[0]    # 最初の文字
'A'
>>> symbols[1]    # 2 番目の文字
'A'
>>> symbols[2]    # 3 番目の文字
'P'
>>> symbols[-1]   # 最後の文字
'O'
>>> symbols[-2]   # 最後から 2 番目の文字
'C'
```

スライシングを使用して部分文字列を抽出することもできます。スライシングを使用すると、開始インデックスと終了インデックスを指定して文字列の一部を取得することができます。スライシングの構文は `string[start:end]` で、部分文字列には開始インデックスから終了インデックスの直前までの文字が含まれます。

```python
>>> symbols[:4]    # 最初の 4 文字
'AAPL'
>>> symbols[-3:]   # 最後の 3 文字
'SCO'
>>> symbols[5:8]   # インデックス 5 から 7 までの文字
'IBM'
```

## 文字列の不変性

Python の文字列は不変（immutable）です。つまり、文字列が作成された後は、個々の文字を変更することはできません。文字列の文字を変更しようとすると、Python はエラーを発生させます。

`symbols` 文字列の最初の文字を変更してみましょう。

```python
>>> symbols[0] = 'a'    # これはエラーを引き起こします
```

次のようなエラーが表示されるはずです。

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: 'str' object does not support item assignment
```

このエラーは、文字列が不変であるため、文字列の個々の文字に新しい値を割り当てることができないことを示しています。

## 文字列の連結

文字列は直接変更することはできませんが、連結（concatenation）によって新しい文字列を作成することができます。連結とは、2 つ以上の文字列を結合することを意味します。Python では、`+` 演算子を使用して文字列を連結することができます。

```python
>>> symbols += ' GOOG'    # 新しいシンボルを追加
>>> symbols
'AAPL IBM MSFT YHOO SCO GOOG'

>>> symbols = 'HPQ ' + symbols    # 新しいシンボルを先頭に追加
>>> symbols
'HPQ AAPL IBM MSFT YHOO SCO GOOG'
```

これらの操作は、元の文字列を変更するのではなく、新しい文字列を作成することに注意してください。元の文字列は変更されず、結合された値を持つ新しい文字列が作成されます。

## 部分文字列の検索

部分文字列が文字列内に存在するかどうかを確認するには、`in` 演算子を使用することができます。`in` 演算子は、部分文字列が文字列内に見つかった場合は `True` を返し、そうでない場合は `False` を返します。

```python
>>> 'IBM' in symbols
True
>>> 'AA' in symbols
True
>>> 'CAT' in symbols
False
```

'AA' が `True` を返すのは、"AAPL" の中に見つかるためです。これは、大きな文字列内で特定のテキストを検索する便利な方法です。

## 文字列メソッド

Python の文字列には、文字列に対して様々な操作を行うための多数の組み込みメソッドが用意されています。これらのメソッドは、文字列オブジェクトに関連付けられた関数であり、ドット表記 (`string.method()`) を使用して呼び出すことができます。

```python
>>> symbols.lower()    # 小文字に変換
'hpq aapl ibm msft yhoo sco goog'

>>> symbols    # 元の文字列は変更されない
'HPQ AAPL IBM MSFT YHOO SCO GOOG'

>>> lowersyms = symbols.lower()    # 結果を新しい変数に保存
>>> lowersyms
'hpq aapl ibm msft yhoo sco goog'

>>> symbols.find('MSFT')    # 部分文字列の開始インデックスを検索
13
>>> symbols[13:17]    # その位置の部分文字列を確認
'MSFT'

>>> symbols = symbols.replace('SCO','')    # 部分文字列を置換
>>> symbols
'HPQ AAPL IBM MSFT YHOO  GOOG'
```

実験が終了したら、次のコマンドを使用して Python シェルを終了することができます。

```python
>>> exit()
```
