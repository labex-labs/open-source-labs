# Открытие и чтение файла

На этом этапе мы научимся открывать и читать файлы в Python. Ввод/вывод файлов (I/O) - это фундаментальное понятие в программировании. Он позволяет вашей программе взаимодействовать с внешними файлами, такими как текстовые файлы, CSV-файлы и другие. В Python одним из наиболее распространенных способов работы с файлами является использование функции `open()`.

Функция `open()` используется для открытия файла в Python. Она принимает два важных аргумента. Первый аргумент - это имя файла, который вы хотите открыть. Второй аргумент - это режим, в котором вы хотите открыть файл. Когда вы хотите прочитать файл, вы используете режим 'r'. Это сообщает Python, что вы хотите только прочитать содержимое файла и не вносить в него никаких изменений.

Теперь давайте добавим некоторый код в файл `pcost.py` для открытия и чтения файла `portfolio.dat`. Откройте файл `pcost.py` в своем редакторе кода и добавьте следующий код:

```python
# pcost.py
# Calculate the total cost of a portfolio of stocks

def portfolio_cost(filename):
    """
    Computes the total cost (shares*price) of a portfolio file
    """
    total_cost = 0.0

    # Open the file
    with open(filename, 'r') as file:
        # Read all lines in the file
        for line in file:
            print(line)  # Just for debugging, to see what we're reading

    # Return the total cost
    return total_cost

# Call the function with the portfolio file
total_cost = portfolio_cost('portfolio.dat')
print(f'Total cost: ${total_cost}')
```

Разберем, что делает этот код:

1. Сначала мы определяем функцию с именем `portfolio_cost()`. Эта функция принимает имя файла в качестве входного параметра. Цель этой функции - рассчитать общую стоимость портфеля акций на основе данных в файле.
2. Внутри функции мы используем функцию `open()` для открытия указанного файла в режиме чтения. Здесь используется оператор `with`, чтобы убедиться, что файл будет правильно закрыт после того, как мы закончим его чтение. Это хорошая практика, чтобы избежать утечки ресурсов.
3. Затем мы используем цикл `for` для чтения файла построчно. Для каждой строки в файле мы выводим ее на экран. Это только для целей отладки, чтобы мы могли видеть, какие данные мы читаем из файла.
4. После чтения файла функция возвращает общую стоимость. В настоящее время общая стоимость установлена равной 0.0, потому что мы еще не реализовали фактический расчет.
5. Вне функции мы вызываем функцию `portfolio_cost()` с именем файла 'portfolio.dat'. Это означает, что мы просим функцию рассчитать общую стоимость на основе данных в файле `portfolio.dat`.
6. Наконец, мы выводим общую стоимость с использованием f-строки.

Теперь давайте запустим этот код, чтобы увидеть, что он делает. Вы можете запустить файл Python из терминала, используя следующую команду:

```bash
python3 ~/project/pcost.py
```

Когда вы запустите эту команду, вы должны увидеть каждую строку файла `portfolio.dat`, выведенную в терминале, за которой следует общая стоимость, которая в настоящее время установлена равной 0.0. Этот вывод помогает вам убедиться, что файл читается правильно.
