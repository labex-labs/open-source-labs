# Создание форматировщика таблиц с использованием доступа к атрибутам

В программировании доступ к атрибутам - это фундаментальная концепция, которая позволяет нам взаимодействовать с свойствами объектов. Теперь мы применим то, что узнали о доступе к атрибутам на практике. Мы создадим полезный инструмент: форматировщик таблиц. Этот форматировщик будет принимать коллекцию объектов и отображать их в табличном формате, что сделает данные легче для чтения и понимания.

## Создание модуля tableformat.py

Сначала нам нужно создать новый файл на Python. Этот файл будет содержать код нашего форматировщика таблиц.

Для создания файла следуйте этим шагам:

1. В WebIDE нажмите на меню "File".
2. Из выпадающего списка выберите "New File".
3. Сохраните только что созданный файл как `tableformat.py` в директории `/home/labex/project/`.

Теперь, когда у нас есть файл, напишем код для функции `print_table()` внутри `tableformat.py`. Эта функция будет отвечать за форматирование и вывод наших объектов в виде таблицы.

```python
def print_table(objects, fields):
    """
    Print a collection of objects as a formatted table.

    Args:
        objects: A sequence of objects
        fields: A list of attribute names
    """
    # Print the header
    headers = fields
    for header in headers:
        print(f"{header:>10}", end=' ')
    print()

    # Print the separator line
    for header in headers:
        print("-" * 10, end=' ')
    print()

    # Print the data
    for obj in objects:
        for field in fields:
            value = getattr(obj, field)
            print(f"{value:>10}", end=' ')
        print()
```

Разберем, что делает эта функция:

1. Она принимает два аргумента: последовательность объектов и список имен атрибутов. Последовательность объектов - это данные, которые мы хотим отобразить, а список имен атрибутов сообщает функции, какие свойства объектов нужно показать.
2. Она выводит строку заголовка. Строка заголовка содержит имена атрибутов, которые нас интересуют.
3. Она выводит разделительную строку. Эта строка помогает визуально отделить заголовок от данных.
4. Для каждого объекта в последовательности она выводит значение каждого указанного атрибута. Она использует функцию `getattr()` для доступа к значению атрибута каждого объекта.

Теперь протестируем нашу функцию `print_table()`, чтобы убедиться, что она работает как ожидается.

```python
# Open a Python interactive shell
python3

# Import our modules
from stock import read_portfolio
import tableformat

# Read the portfolio data
portfolio = read_portfolio('portfolio.csv')

# Print the portfolio as a table with name, shares, and price columns
tableformat.print_table(portfolio, ['name', 'shares', 'price'])
```

При запуске вышеуказанного кода вы должны увидеть следующий вывод:

```
      name     shares      price
---------- ---------- ----------
        AA        100       32.2
       IBM         50       91.1
       CAT        150      83.44
      MSFT        200      51.23
        GE         95      40.37
      MSFT         50       65.1
       IBM        100      70.44
```

Одним из преимуществ нашей функции `print_table()` является ее гибкость. Мы можем изменить отображаемые столбцы, просто изменив список `fields`.

```python
# Just show shares and name
tableformat.print_table(portfolio, ['shares', 'name'])
```

Запуск этого кода даст следующий вывод:

```
    shares       name
---------- ----------
       100         AA
        50        IBM
       150        CAT
       200       MSFT
        95         GE
        50       MSFT
       100        IBM
```

Сила этого подхода заключается в его универсальности. Мы можем использовать ту же функцию `print_table()` для вывода таблиц любого типа объектов, если только мы знаем имена атрибутов, которые хотим отобразить. Это делает наш форматировщик таблиц очень полезным инструментом в нашем программистском арсенале.
