# Экспорт всего из пакета

В Python организация пакетов является ключевым аспектом эффективного управления кодом. Теперь мы пойдем дальше в организации нашего пакета. Мы определим, какие символы должны быть экспортированы на уровне пакета. Экспорт символов означает то, что определенные функции, классы или переменные становятся доступными для других частей вашего кода или для других разработчиков, которые могут использовать ваш пакет.

## Добавление `__all__` в пакет

При работе с пакетами Python вы, возможно, захотите контролировать, какие символы доступны, когда кто - то использует инструкцию `from structly import *`. Именно здесь пригодится список `__all__`. Добавив список `__all__` в файл `__init__.py` пакета, вы можете точно контролировать, какие символы будут доступны при использовании инструкции `from structly import *`.

Сначала создадим или обновим файл `__init__.py`. Мы используем команду `touch` для создания файла, если он не существует.

```bash
touch ~/project/structly/__init__.py
```

Теперь откройте файл `__init__.py` и добавьте список `__all__`. Этот список должен включать все символы, которые мы хотим экспортировать. Символы сгруппированы в зависимости от того, откуда они приходят, например, из модулей `structure`, `reader` и `tableformat`.

```python
# structly/__init__.py

from .structure import *
from .reader import *
from .tableformat import *

# Define what symbols are exported when using "from structly import *"
__all__ = ['Structure',  # from structure
           'read_csv_as_instances', 'read_csv_as_dicts', 'read_csv_as_columns',  # from reader
           'create_formatter', 'print_table']  # from tableformat
```

После добавления кода сохраните файл и выйдите из редактора.

## Понимание `import *`

Шаблон `from module import *` в целом не рекомендуется для использования в большинстве Python - кода. Есть несколько причин для этого:

1. Он может загрязнить ваше пространство имен неожиданными символами. Это означает, что в текущем пространстве имен могут появиться переменные или функции, которые вы не ожидали, что может привести к конфликтам имен.
2. Он делает неясным, откуда именно приходят определенные символы. Когда вы используете `import *`, сложно понять, из какого модуля пришел тот или иной символ, что может усложнить понимание и поддержку кода.
3. Он может привести к проблемам с переопределением (shadowing). Переопределение возникает, когда локальная переменная или функция имеет то же имя, что и переменная или функция из другого модуля, что может привести к неожиданному поведению.

Однако есть определенные случаи, когда использование `import *` уместно:

- Для пакетов, которые предназначены для использования как единое целое. Если пакет должен использоваться как единый блок, то использование `import *` может упростить доступ ко всем необходимым символам.
- Когда пакет определяет четкий интерфейс с помощью `__all__`. Используя список `__all__`, вы можете контролировать, какие символы экспортируются, что делает использование `import *` более безопасным.
- Для интерактивного использования, например, в Python REPL (Read - Eval - Print Loop). В интерактивной среде может быть удобно импортировать все символы сразу.

## Тестирование с использованием `import *`

Чтобы убедиться, что мы можем импортировать все символы сразу, давайте создадим еще один тестовый файл. Мы используем команду `touch` для создания файла.

```bash
touch ~/project/test_import_all.py
```

Теперь откройте файл `test_import_all.py` и добавьте следующее содержимое. Этот код импортирует все символы из пакета `structly` и затем проверяет, доступны ли некоторые важные символы.

```python
# Test importing everything at once

from structly import *

# Try using the imported symbols
print(f"Structure symbol is available: {Structure is not None}")
print(f"read_csv_as_instances symbol is available: {read_csv_as_instances is not None}")
print(f"create_formatter symbol is available: {create_formatter is not None}")
print(f"print_table symbol is available: {print_table is not None}")

print("All symbols successfully imported!")
```

Сохраните файл и выйдите из редактора. Теперь давайте запустим тест. Сначала перейдите в директорию проекта с помощью команды `cd`, а затем запустите Python - скрипт.

```bash
cd ~/project
python test_import_all.py
```

Если все настроено правильно, вы должны увидеть подтверждение, что все символы были успешно импортированы.
