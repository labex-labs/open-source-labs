# 型の整合

現在の `Stock` クラスには、ファイルから読み取る際の変換を行う `_types` クラス変数がありますが、型を強制するプロパティもあります。この演出を担うのは誰でしょうか？ プロパティの定義を修正して、`_types` クラス変数に指定された型を使用するようにします。サブクラス化を通じて型を変更した場合にもプロパティが機能することを確認します。たとえば：

```python
>>> from decimal import Decimal
>>> class DStock(Stock):
        _types = (str, int, Decimal)

>>> s = DStock('AA', 50, Decimal('91.1'))
>>> s.price = 92.3
Traceback (most recent call last):
...
TypeError: Expected a Decimal
>>>
```

**考察**

この実験の最後に得られる `Stock` クラスは、プロパティ、型チェック、コンストラクタ、その他の詳細が混ざり合った混乱したものです。数十個または数百個のこのようなクラス定義があるコードを保守するのはどんなに不快か想像してみてください。

私たちはかなり簡単にする方法を考え出すつもりですが、それには時間ともっと高度な技術が必要になります。お楽しみに。
