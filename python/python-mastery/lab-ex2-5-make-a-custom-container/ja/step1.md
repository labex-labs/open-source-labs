# リストの拡大

Pythonのリストは、`append()`操作を実行するために高度に最適化されています。リストが拡大するたびに、実際に必要なメモリよりも大きなメモリチャンクを確保します。これは、後でリストに追加データがあることが期待されるためです。新しい項目が追加され、空きスペースがある場合、`append()`操作はメモリを追加割り当てすることなく項目を格納します。

リストのこの機能を、リストに対して`sys.getsizeof()`関数を使用していくつかの項目を追加することで実験してみましょう。

```python
>>> import sys
>>> items = []
>>> sys.getsizeof(items)
64
>>> items.append(1)
>>> sys.getsizeof(items)
96
>>> items.append(2)
>>> sys.getsizeof(items)    # サイズが増加しないことに注意
96
>>> items.append(3)
>>> sys.getsizeof(items)    # ここでもまだ増加しません
96
>>> items.append(4)
>>> sys.getsizeof(items)    # まだです。
96
>>> items.append(5)
>>> sys.getsizeof(items)    # サイズが飛躍的に増加したことに注意
128
>>>
```

リストは参照によって項目を格納します。したがって、各項目に必要なメモリは1つのメモリアドレスです。64ビットマシンでは、アドレスは通常8バイトです。ただし、Pythonが32ビット用にコンパイルされている場合、4バイトになる場合があり、上記の例の数値は表示されたものの半分になります。
