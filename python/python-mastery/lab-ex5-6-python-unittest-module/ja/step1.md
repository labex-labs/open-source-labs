# 最初の単体テストの作成

Python の `unittest` モジュールは、テストを組織して実行するための構造化された方法を提供する強力なツールです。最初の単体テストを書き始める前に、いくつかの重要な概念を理解しましょう。テストフィクスチャは、`setUp` や `tearDown` のようなメソッドで、テストの前に環境を準備し、テスト後にクリーンアップするのに役立ちます。テストケースは個々のテスト単位で、テストスイートはテストケースの集合で、テストランナーはこれらのテストを実行し、結果を表示する役割を担います。

この最初のステップでは、`stock.py` ファイルにすでに定義されている `Stock` クラスの基本的なテストファイルを作成します。

1. まず、`stock.py` ファイルを開きましょう。これにより、テスト対象の `Stock` クラスを理解するのに役立ちます。`stock.py` のコードを見ることで、クラスの構造、持つ属性、提供するメソッドを確認できます。`stock.py` ファイルの内容を表示するには、ターミナルで以下のコマンドを実行します。

```bash
cat stock.py
```

2. 次に、好みのテキストエディタを使用して、`teststock.py` という名前の新しいファイルを作成します。このファイルには、`Stock` クラスのテストケースが含まれます。`teststock.py` ファイルに記述する必要のあるコードは次のとおりです。

```python
# teststock.py

import unittest
import stock

class TestStock(unittest.TestCase):
    def test_create(self):
        s = stock.Stock('GOOG', 100, 490.1)
        self.assertEqual(s.name, 'GOOG')
        self.assertEqual(s.shares, 100)
        self.assertEqual(s.price, 490.1)

if __name__ == '__main__':
    unittest.main()
```

このコードの主要なコンポーネントを分解してみましょう。

- `import unittest`: この行は、Python でテストを書いて実行するために必要なツールとクラスを提供する `unittest` モジュールをインポートします。
- `import stock`: これは、`Stock` クラスを含むモジュールをインポートします。このインポートがなければ、テストコードで `Stock` クラスにアクセスすることができません。
- `class TestStock(unittest.TestCase)`: `TestStock` という名前の新しいクラスを作成し、`unittest.TestCase` を継承します。これにより、`TestStock` クラスは複数のテストメソッドを含むことができるテストケースクラスになります。
- `def test_create(self)`: これはテストメソッドです。`unittest` フレームワークでは、すべてのテストメソッドは `test_` という接頭辞で始まる必要があります。このメソッドは `Stock` クラスのインスタンスを作成し、`assertEqual` メソッドを使用して `Stock` インスタンスの属性が期待される値と一致するかどうかを確認します。
- `assertEqual`: これは `TestCase` クラスが提供するメソッドです。2 つの値が等しいかどうかをチェックします。等しくない場合、テストは失敗します。
- `unittest.main()`: このスクリプトが直接実行されると、`unittest.main()` は `TestStock` クラス内のすべてのテストメソッドを実行し、結果を表示します。

3. `teststock.py` ファイルにコードを書いたら、保存します。次に、ターミナルで以下のコマンドを実行してテストを実行します。

```bash
python3 teststock.py
```

次のような出力が表示されるはずです。

```
.
----------------------------------------------------------------------
Ran 1 test in 0.001s

OK
```

出力の単一のドット (`.`) は、1 つのテストが正常に通過したことを示します。テストが失敗した場合、ドットの代わりに `F` が表示され、テストで何が問題になったかに関する詳細情報も表示されます。この出力を使って、コードが期待どおりに動作しているか、修正が必要な問題があるかをすぐに確認できます。
