# Создание вашего первого модульного теста (юнит-теста)

Модуль `unittest` языка Python представляет собой мощный инструмент, который предоставляет структурированный способ организации и выполнения тестов. Прежде чем мы приступим к написанию нашего первого модульного теста, давайте разберемся с некоторыми ключевыми концепциями. Тестовые фикстуры (test fixtures) - это методы, такие как `setUp` и `tearDown`, которые помогают подготовить окружение перед выполнением теста и очистить его после завершения. Тестовые случаи (test cases) - это отдельные единицы тестирования, тестовые наборы (test suites) - это коллекции тестовых случаев, а тестовые запускающие механизмы (test runners) отвечают за выполнение этих тестов и представление результатов.

В этом первом шаге мы создадим базовый тестовый файл для класса `Stock`, который уже определен в файле `stock.py`.

1. Сначала откройте файл `stock.py`. Это поможет нам понять, какой класс `Stock` мы будем тестировать. Посмотрев на код в файле `stock.py`, мы можем увидеть, как устроен класс, какие у него атрибуты и методы. Чтобы просмотреть содержимое файла `stock.py`, выполните следующую команду в терминале:

```bash
cat stock.py
```

2. Теперь пора создать новый файл с именем `teststock.py` с помощью вашего предпочитаемого текстового редактора. Этот файл будет содержать наши тестовые случаи для класса `Stock`. Вот код, который вам нужно написать в файле `teststock.py`:

```python
# teststock.py

import unittest
import stock

class TestStock(unittest.TestCase):
    def test_create(self):
        s = stock.Stock('GOOG', 100, 490.1)
        self.assertEqual(s.name, 'GOOG')
        self.assertEqual(s.shares, 100)
        self.assertEqual(s.price, 490.1)

if __name__ == '__main__':
    unittest.main()
```

Разберем основные компоненты этого кода:

- `import unittest`: Эта строка импортирует модуль `unittest`, который предоставляет необходимые инструменты и классы для написания и запуска тестов на Python.
- `import stock`: Это импортирует модуль, содержащий наш класс `Stock`. Без этого импорта мы не сможем получить доступ к классу `Stock` в нашем тестовом коде.
- `class TestStock(unittest.TestCase)`: Мы создаем новый класс с именем `TestStock`, который наследуется от `unittest.TestCase`. Это делает наш класс `TestStock` классом тестового случая, который может содержать несколько тестовых методов.
- `def test_create(self)`: Это тестовый метод. В фреймворке `unittest` все тестовые методы должны начинаться с префикса `test_`. Этот метод создает экземпляр класса `Stock`, а затем использует метод `assertEqual` для проверки, соответствуют ли атрибуты экземпляра `Stock` ожидаемым значениям.
- `assertEqual`: Это метод, предоставляемый классом `TestCase`. Он проверяет, равны ли два значения. Если они не равны, тест завершится с ошибкой.
- `unittest.main()`: Когда этот скрипт выполняется напрямую, `unittest.main()` запустит все тестовые методы в классе `TestStock` и отобразит результаты.

3. После написания кода в файле `teststock.py` сохраните его. Затем выполните следующую команду в терминале для запуска теста:

```bash
python3 teststock.py
```

Вы должны увидеть вывод, похожий на следующий:

```
.
----------------------------------------------------------------------
Ran 1 test in 0.001s

OK
```

Одна точка (`.`) в выводе означает, что один тест успешно прошел. Если тест завершается с ошибкой, вместо точки вы увидите букву `F`, а также подробную информацию о том, что пошло не так в тесте. Этот вывод помогает вам быстро определить, работает ли ваш код как ожидается, или есть ли какие - то проблемы, которые нужно исправить.
