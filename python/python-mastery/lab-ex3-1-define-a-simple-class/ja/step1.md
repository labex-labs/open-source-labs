# Stock クラスに sell メソッドを追加する

このステップでは、新しいメソッドを追加することで `Stock` クラスを拡張します。メソッドは、クラスに属する特別な関数で、そのクラスから作成されたオブジェクトを操作することができます。`sell(nshares)` という名前のメソッドを作成し、株式の売却アクションをシミュレートします。株式を売却すると、保有する株式数が減少し、このメソッドがその減少を処理します。

## メソッドとは何か？

まず、メソッドが何であるかを理解しましょう。メソッドは、クラスの内部で定義された関数です。そのクラスのインスタンス（個々のコピーのようなもの）を操作するように設計されています。オブジェクトに対してメソッドが呼び出されると、そのオブジェクトのすべての属性（特性）にアクセスすることができます。これは `self` パラメータを通じて行われます。`self` パラメータは、メソッドが呼び出されているオブジェクトへの参照です。したがって、メソッドの内部で `self` を使用するときは、そのメソッドが作用している特定のオブジェクトを参照しています。

## 実装手順

1. まず、エディタで `stock.py` ファイルを開く必要があります。これを行うには、コマンドラインを使用します。ターミナルを開き、次のコマンドを実行します。このコマンドは、`stock.py` ファイルがある `project` フォルダにディレクトリを変更します。

```bash
cd ~/project
```

2. `stock.py` ファイルを開いたら、`Stock` クラス内の特定のコメントを見つける必要があります。`# TODO: Add sell(nshares) method here` というコメントを探します。このコメントは、新しい `sell` メソッドを追加する場所を示すプレースホルダーです。

3. 次に、`sell` メソッドを追加しましょう。このメソッドは `nshares` というパラメータを受け取り、これは売却したい株式数を表します。このメソッドの主な役割は、`Stock` オブジェクトの `shares` 属性を売却する株式数だけ減らすことです。

以下は追加する `sell` メソッドのコードです。

```python
def sell(self, nshares):
    self.shares -= nshares
```

このコードでは、`self.shares` は `Stock` オブジェクトの `shares` 属性を参照しています。`-=` 演算子は、`self.shares` の現在の値から `nshares` の値を減算します。

4. `sell` メソッドを追加したら、`stock.py` ファイルを保存する必要があります。キーボードで `Ctrl+S` を押すか、エディタのメニューから「ファイル > 保存」を選択して保存できます。

5. `sell` メソッドが正しく動作することを確認するために、テストスクリプトを作成します。`test_sell.py` という名前の新しい Python ファイルを作成し、以下のコードを追加します。

```python
# test_sell.py
from stock import Stock

# Create a stock object
s = Stock('GOOG', 100, 490.10)
print(f"Initial shares: {s.shares}")

# Sell 25 shares
s.sell(25)
print(f"Shares after selling: {s.shares}")
```

このスクリプトでは、まず `stock.py` ファイルから `Stock` クラスをインポートします。次に、株式シンボルが `GOOG`、株式数が 100、価格が 490.10 の `Stock` オブジェクト `s` を作成します。最初の株式数を表示します。その後、`s` オブジェクトに対して `sell` メソッドを呼び出して 25 株を売却します。最後に、売却後の株式数を表示します。

6. 次に、テストスクリプトを実行して、`sell` メソッドが期待通りに動作するかを確認します。再度ターミナルを開き、次のコマンドを実行します。

```bash
python3 test_sell.py
```

すべてが正しく動作している場合、次のような出力が表示されるはずです。

```
Initial shares: 100
Shares after selling: 75
```

この出力は、`sell` メソッドが正しく動作していることを確認します。指定した数量だけ株式数を正常に減らしています。
