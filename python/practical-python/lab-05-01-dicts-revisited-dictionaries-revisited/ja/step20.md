# 演習 5.3：クラスの役割

クラス定義を構成する定義は、そのクラスのすべてのインスタンスによって共有されます。すべてのインスタンスがその関連するクラスに戻るリンクを持っていることに注意してください：

```python
>>> goog.__class__
... 出力を見てください...
>>> ibm.__class__
... 出力を見てください...
>>>
```

インスタンスでメソッドを呼び出してみましょう：

```python
>>> goog.cost()
49010.0
>>> ibm.cost()
4561.5
>>>
```

名前 'cost' は `goog.__dict__` または `ibm.__dict__` のどちらにも定義されていないことに注意してください。代わりに、それはクラス辞書によって提供されています。これを試してみましょう：

```python
>>> Stock.__dict__['cost']
... 出力を見てください...
>>>
```

辞書を介して直接 `cost()` メソッドを呼び出してみましょう：

```python
>>> Stock.__dict__['cost'](goog)
49010.0
>>> Stock.__dict__['cost'](ibm)
4561.5
>>>
```

クラス定義で定義された関数をどのように呼び出しているかと、`self` 引数がインスタンスをどのように取得するかに注意してください。

`Stock` クラスに新しい属性を追加してみましょう：

```python
>>> Stock.foo = 42
>>>
```

この新しい属性がすべてのインスタンスにどのように表示されるかに注意してください：

```python
>>> goog.foo
42
>>> ibm.foo
42
>>>
```

ただし、それはインスタンス辞書の一部ではないことに注意してください：

```python
>>> goog.__dict__
... 出力を見て、'foo' 属性がないことに注意してください...
>>>
```

インスタンスで `foo` 属性にアクセスできる理由は、Python がインスタンス自体に何かを見つけられない場合、常にクラス辞書をチェックするからです。

注：この演習のこの部分は、クラス変数として知られるものを示しています。たとえば、次のようなクラスがあるとしましょう：

```python
class Foo(object):
     a = 13                  # クラス変数
     def __init__(self,b):
         self.b = b          # インスタンス変数
```

このクラスでは、クラス自体の本体で割り当てられた変数 `a` は「クラス変数」です。作成されるすべてのインスタンスによって共有されます。たとえば：

```python
>>> f = Foo(10)
>>> g = Foo(20)
>>> f.a          # クラス変数を調べる（両方のインスタンスで同じ）
13
>>> g.a
13
>>> f.b          # インスタンス変数を調べる（異なる）
10
>>> g.b
20
>>> Foo.a = 42   # クラス変数の値を変更する
>>> f.a
42
>>> g.a
42
>>>
```
