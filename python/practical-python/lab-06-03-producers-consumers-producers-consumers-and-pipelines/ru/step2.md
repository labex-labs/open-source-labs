# Конвейеры генераторов

Вы можете использовать этот аспект генераторов для настройки конвейеров обработки (похожих на Unix-пайпы).

_производитель_ → _обработка_ → _обработка_ → _потребитель_

Конвейеры обработки имеют начального производителя данных, некоторый набор промежуточных этапов обработки и конечного потребителя.

**производитель** → _обработка_ → _обработка_ → _потребитель_

```python
def producer():
 ...
    yield item
 ...
```

Производитель обычно является генератором. Хотя это может быть также список или другая последовательность. `yield` подает данные в конвейер.

_proизводитель_ → _обработка_ → _обработка_ → **потребитель**

```python
def consumer(s):
    for item in s:
     ...
```

Потребитель - это цикл `for`. Он получает элементы и делает с ними что-то.

_proизводитель_ → **обработка** → **обработка** → _потребитель_

```python
def processing(s):
    for item in s:
     ...
        yield newitem
     ...
```

Промежуточные этапы обработки одновременно потребляют и производят элементы. Они могут изменять поток данных. Они также могут фильтровать (игнорировать элементы).

_proизводитель_ → _обработка_ → _обработка_ → _потребитель_

```python
def producer():
 ...
    yield item          # генерирует элемент, который получает `processing`
 ...

def processing(s):
    for item in s:      # Приходит от `producer`
     ...
        yield newitem   # генерирует новый элемент
     ...

def consumer(s):
    for item in s:      # Приходит от `processing`
     ...
```

Код для настройки конвейера

```python
a = producer()
b = processing(a)
c = consumer(b)
```

Вы заметите, что данные поступают пошагово через разные функции.

Для этого упражнения программа `stocksim.py` должна по-прежнему работать в фоновом режиме. Вы будете использовать функцию `follow()`, которую вы написали в предыдущем упражнении.
