# Генераторы

Генератор - это функция, которая определяет итерацию.

```python
def countdown(n):
    while n > 0:
        yield n
        n -= 1
```

Например:

```python
>>> for x in countdown(10):
...   print(x, end=' ')
...
10 9 8 7 6 5 4 3 2 1
>>>
```

Генератором является любая функция, которая использует оператор `yield`.

Поведение генераторов отличается от поведения обычной функции. Вызов функции-генератора создает объект-генератор. Функция не выполняется сразу.

```python
def countdown(n):
    # Добавлено выражение print
    print('Counting down from', n)
    while n > 0:
        yield n
        n -= 1
```

```python
>>> x = countdown(10)
# НЕТ ВЫРАЖЕНИЯ print
>>> x
# x - это объект-генератор
<generator object at 0x58490>
>>>
```

Функция выполняется только при вызове `__next__()`.

```python
>>> x = countdown(10)
>>> x
<generator object at 0x58490>
>>> x.__next__()
Counting down from 10
10
>>>
```

`yield` возвращает значение, но приостанавливает выполнение функции. Функция продолжает выполнение при следующем вызове `__next__()`.

```python
>>> x.__next__()
9
>>> x.__next__()
8
```

Когда генератор в конце возвращает значение, итерация вызывает ошибку.

```python
>>> x.__next__()
1
>>> x.__next__()
Traceback (most recent call last):
File "<stdin>", line 1, in? StopIteration
>>>
```

_Замечание: Функция-генератор реализует тот же низкоуровневый протокол, который использует оператор for для списков, кортежей, словарей, файлов и т.д._
