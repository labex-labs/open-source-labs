# 演習 2.20: シーケンスの集約

シングルな Python 文を使ってポートフォリオの総コストを計算しましょう。

```python
>>> portfolio = read_portfolio('portfolio.csv')
>>> cost = sum([ s['shares'] * s['price'] for s in portfolio ])
>>> cost
44671.15
>>>
```

それができたら、シングルな文を使ってポートフォリオの現在の価値をどのように計算できるかを示してください。

```python
>>> value = sum([ s['shares'] * prices[s['name']] for s in portfolio ])
>>> value
28686.1
>>>
```

上記の両方の操作は、マップ・リダクションの例です。リスト内包表記は、リスト全体に対して操作をマッピングしています。

```python
>>> [ s['shares'] * s['price'] for s in portfolio ]
[3220.0000000000005, 4555.0, 12516.0, 10246.0, 3835.1499999999996, 3254.9999999999995, 7044.0]
>>>
```

次に、`sum()`関数が結果全体に対して集約を行っています。

```python
>>> sum(_)
44671.15
>>>
```

この知識を身につけることで、今やビッグデータのスタートアップ企業を立ち上げる準備が整いました。
