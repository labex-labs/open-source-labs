# 演習 2.1: タプル

対話型プロンプトで、上記の行を表す次のタプルを作成しますが、数値列を適切な数値に変換します。

```python
>>> t = (row[0], int(row[1]), float(row[2]))
>>> t
('AA', 100, 32.2)
>>>
```

これを使うと、今では株数と価格を掛けて総コストを計算できます。

```python
>>> cost = t[1] * t[2]
>>> cost
3220.0000000000005
>>>
```

Python の数学が壊れていますか？3220.0000000000005 という答えは何でしょう？

これは、コンピュータの浮動小数点ハードウェアが 10 進数ではなく 2 進数で小数を正確に表現できるためのものです。10 進数の小数を含むたった単純な計算でさえ、小さなエラーが発生します。これは正常なことですが、初めて見るなら少し驚くかもしれません。

これは、浮動小数点を使用するすべてのプログラミング言語で起こりますが、印刷時にはしばしば隠されます。たとえば：

```python
>>> print(f'{cost:0.2f}')
3220.00
>>>
```

タプルは読み取り専用です。株数を 75 に変更しようとしてこれを確認しましょう。

```python
>>> t[1] = 75
Traceback (most recent call last):
    File "<stdin>", line 1, in <module>
TypeError: 'tuple' object does not support item assignment
>>>
```

タプルの内容を変更することはできませんが、常に古いタプルを置き換える全新のタプルを作成することができます。

```python
>>> t = (t[0], 75, t[2])
>>> t
('AA', 75, 32.2)
>>>
```

このように既存の変数名を再代入するとき、古い値は破棄されます。上記の代入はタプルを変更しているように見えるかもしれませんが、実際には新しいタプルを作成して古いタプルを捨てています。

タプルは、値を変数にパックしたりアンパックしたりするためによく使用されます。次のように試してみてください。

```python
>>> name, shares, price = t
>>> name
'AA'
>>> shares
75
>>> price
32.2
>>>
```

上記の変数を使って、それらを再びタプルにパックします。

```python
>>> t = (name, 2*shares, price)
>>> t
('AA', 150, 32.2)
>>>
```
