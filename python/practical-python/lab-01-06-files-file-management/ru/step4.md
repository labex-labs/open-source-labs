# Упражнение 1.26: Введение в файлы

Во - первых, попробуйте прочитать весь файл сразу в виде большой строки:

```python
>>> with open('portfolio.csv', 'rt') as f:
        data = f.read()

>>> data
'name,shares,price\n"AA",100,32.20\n"IBM",50,91.10\n"CAT",150,83.44\n"MSFT",200,51.23\n"GE",95,40.37\n"MSFT",50,65.10\n"IBM",100,70.44\n'
>>> print(data)
name,shares,price
"AA",100,32.20
"IBM",50,91.10
"CAT",150,83.44
"MSFT",200,51.23
"GE",95,40.37
"MSFT",50,65.10
"IBM",100,70.44
>>>
```

В приведенном выше примере следует отметить, что Python имеет два режима вывода. В первом режиме, когда вы вводите `data` в提示符，Python показывает вам необработанное строковое представление, включая кавычки и escape - коды. Когда вы вводите `print(data)`, вы получаете фактический отформатированный вывод строки.

Хотя чтение файла сразу целиком простой, это часто не самый подходящий способ, особенно если файл碰巧 огромен или содержит строки текста, которые вы хотите обрабатывать по одной.

Для чтения файла построчно используйте цикл `for` следующим образом:

```python
>>> with open('portfolio.csv', 'rt') as f:
        for line in f:
            print(line, end='')

name,shares,price
"AA",100,32.20
"IBM",50,91.10
...
>>>
```

Когда вы используете этот код, как показано, строки читаются до тех пор, пока не будет достигнут конец файла, в котором точка цикла останавливается.

В некоторых случаях вы можете захотеть вручную прочитать или пропустить _единственную_ строку текста (например, вы можете хотеть пропустить первую строку с заголовками столбцов).

```python
>>> f = open('portfolio.csv', 'rt')
>>> headers = next(f)
>>> headers
'name,shares,price\n'
>>> for line in f:
    print(line, end='')

"AA",100,32.20
"IBM",50,91.10
...
>>> f.close()
>>>
```

`next()` возвращает следующую строку текста в файле. Если бы вы вызывали его повторно, вы получили бы последовательные строки. Однако, чтобы вы знали, цикл `for` уже использует `next()` для получения своих данных. Таким образом, вы обычно не вызываете его напрямую, если не пытаетесь явно пропустить или прочитать одну строку, как показано.

Как только вы читаете строки файла, вы можете начать выполнять больше обработки, такой как разделение. Например, попробуйте это:

```python
>>> f = open('portfolio.csv', 'rt')
>>> headers = next(f).split(',')
>>> headers
['name','shares', 'price\n']
>>> for line in f:
    row = line.split(',')
    print(row)

['"AA"', '100', '32.20\n']
['"IBM"', '50', '91.10\n']
...
>>> f.close()
```

_Примечание: В этих примерах явно вызывается `f.close()`, потому что не используется инструкция `with`._
