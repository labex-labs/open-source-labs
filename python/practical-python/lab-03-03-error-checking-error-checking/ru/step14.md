# Упражнение 3.8: Генерация исключений

Функция `parse_csv()`, которую вы написали в предыдущем разделе, позволяет выбирать пользователем заданные столбцы, но это работает только в том случае, если входной файл с данными содержит заголовки столбцов.

Измените код так, чтобы генерировалось исключение, если передаются оба аргумента `select` и `has_headers=False`. Например:

```python
>>> parse_csv('/home/labex/project/prices.csv', select=['name','price'], has_headers=False)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "fileparse.py", line 9, in parse_csv
    raise RuntimeError("select argument requires column headers")
RuntimeError: select argument requires column headers
>>>
```

Добавив эту проверку, вы можете спросить, нужно ли выполнять другие виды проверок целостности в функции. Например, нужно ли проверить, что имя файла является строкой, что `types` является списком или что-то подобное?

В общем случае обычно лучше пропустить такие тесты и просто позволить программе завершиться с ошибкой при неправильных входных данных. Сообщение трассировки ошибки покажет источник проблемы и может помочь при отладке.

Основная причина добавления вышеописанной проверки - избежать выполнения кода в бессмысленном режиме (например, использовать функцию, требующую заголовков столбцов, и одновременно указывать, что заголовков нет).

Это указывает на ошибку в программировании в вызывающем коде. Проверка случаев, которые "не должны происходить", часто является хорошей идеей.
