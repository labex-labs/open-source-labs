# Хук React useComponentWillUnmount

> В ВМ уже предоставлены `index.html` и `script.js`. В общем, вам нужно только добавить код в `script.js` и `style.css`.

Чтобы выполнить функцию обратного вызова непосредственно перед демонтажом и уничтожением компонента, вы можете использовать хук `useEffect()` с пустым массивом в качестве второго аргумента. Верните предоставленную функцию обратного вызова, чтобы она была выполнена только один раз перед очисткой. Это поведение аналогично методу жизненного цикла `componentWillUnmount()` классовых компонентов. Также вы можете использовать следующий фрагмент кода, чтобы создать пользовательский хук `useComponentWillUnmount()`, который принимает функцию `onUnmountHandler` в качестве аргумента и выполняет ее перед демонтажом компонента:

```jsx
const useComponentWillUnmount = (onUnmountHandler) => {
  React.useEffect(
    () => () => {
      onUnmountHandler();
    },
    []
  );
};
```

Затем вы можете использовать этот пользовательский хук в своем функциональном компоненте так:

```jsx
const Unmounter = () => {
  useComponentWillUnmount(() => console.log("Component will unmount"));

  return <div>Check the console!</div>;
};

ReactDOM.createRoot(document.getElementById("root")).render(<Unmounter />);
```

При демонтаже компонента в консоль будет выведено сообщение "Component will unmount".

Пожалуйста, нажмите кнопку 'Go Live' в нижнем правом углу, чтобы запустить веб-сервис на порту 8080. Затем вы можете обновить вкладку **Web 8080**, чтобы просмотреть веб-страницу.
